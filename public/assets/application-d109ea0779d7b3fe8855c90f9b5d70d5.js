function is_printable_character(t){return t>=48&&90>=t||t>=96&&111>=t||t>=186&&192>=t||t>=219&&222>=t?!0:!1}function querystring(t){for(var e,n=new RegExp("(?:\\?|&)"+t+"=(.*?)(?=&|$)","gi"),o=[];null!=(e=n.exec(document.location.search));)o.push(e[1]);return o}!function(){}.call(this),function(){var t,e;Backbone.Marionette.Renderer.render=function(t,e){if(!JST[t])throw"Template '"+t+"' not found!";return JST[t](e)},t=this,t.App=new Backbone.Marionette.Application,e=function(){},App.addInitializer(function(){return e()}),App.on("start",function(){return console.info("started: Application")}),App.addRegions({header:"#header",navbar:"#header > .navbar",content:"#content > .container > .content-inner",footer:"#footer",mainContent:"#Content"}),App.start()}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};t=function(t){function e(){_.bindAll(this),Backbone.Marionette.Region.prototype.constructor.apply(this,arguments),this.on("view:show",this.showDialog,this)}return n(e,t),e.prototype.el="#RegionDialog",e.prototype.getEl=function(t){var e;return e=$(t),e.dialog,e.on("hidden",this.close),e},e.prototype.showDialog=function(t){return t.on("close",this.hideDialog,this),this.$el.dialog("show")},e.prototype.hideDialog=function(){return this.$el.dialog("hide")},e}(Marionette.Region),App.addRegions({dialog:t})}.call(this),function(){App.addInitializer(function(){return $(document).ready(function(){return App.jPanelMenu=$.jPanelMenu({menu:$(".jpanel-nav"),trigger:"a.navbar-toggle",excludedPanelContent:"#fb-root,script,uvOverlay1,.modal",before:function(){},afterOpen:function(){},afterClose:function(){}})})})}.call(this),function(){var t,e,n,o,i;App.respond={mobile:!1,medium:window.matchMedia("(max-width: 767px)"),small:window.matchMedia("(max-width: 360px)"),tiny:window.matchMedia("(max-width: 300px)"),test:{medium:function(){return e(),console.log(App.respond.medium.matches),App.respond.medium.matches},small:function(){return o(),console.log(App.respond.small.matches),App.respond.small.matches},tiny:function(){return i(),console.log(App.respond.tiny.matches),App.respond.tiny.matches}}},t=function(){var t,e;return t=$(".ui-dialog:visible"),e=function(t){var e,n,o,i,a,r;return e=t.find(".ui-dialog-content"),i=e.find("iframe"),a=$(window).height(),r=$(window).width(),t.height(a),t.width(r),n=a-95,o=r-28,e.height(n),e.width(o)},t.length?t.each(function(){var t,n,o,i;return i=$(this),t=i.find(".ui-dialog-content"),n=t.find("iframe"),App.respond.medium.matches?(i.addClass("is-mobile"),n.length&&(n.height(t.height()),n.width("100%")),i.css({width:"100%",top:0,left:0}),e(i)):(i.removeClass("is-mobile"),o=i.data("myOrig"),i.height(o.height),i.width(o.width),i.css("left",o.left),i.css("top",o.top),t.height(o.contentHeight))}):void 0},n=$.ui.dialog.prototype.open,$.ui.dialog.prototype.open=function(){var e;n.apply(this,arguments),e={height:this.uiDialog.height(),width:this.uiDialog.width(),left:this.uiDialog.css("left"),top:this.uiDialog.css("top"),contentHeight:this.uiDialog.find(".ui-dialog-content").height()},this.uiDialog.data("myOrig",e),t()},e=function(){var e;return e=App.respond.medium,e.matches?($(window).on("resize",t),$(window).on("orientationchange",t),t(),App.jPanelMenu.on(),$("body").addClass("mobile screen-medium")):($(window).off("resize",t),$(window).off("orientationchange",t),t(),App.jPanelMenu.off(),$("body").removeClass("mobile screen-medium"))},o=function(){var t;return t=App.respond.small,t.matches?$("body").addClass("screen-small"):$("body").removeClass("screen-small")},i=function(){var t;return t=App.respond.tiny,t.matches?$("body").addClass("screen-tiny"):$("body").removeClass("screen-tiny")},App.respond.medium.addListener(e),App.respond.small.addListener(o),App.respond.tiny.addListener(i),$(document).ready(function(){return App.respond.test.medium(),App.respond.test.small(),App.respond.test.tiny()})}.call(this),function(){App.module("Components",function(){return this.startWithParent=!1,this._init=function(){}})}.call(this),function(){CKEDITOR.editorConfig=function(t){return t.height="100px",t.removePlugins="elementspath",t.resize_enabled=!1,t.contentsCss="/assets/application-b8a635506a2b6d16ed57ba778be175f8.css",t.skinName="/ckeditor/skins/moono",t.bodyClass="no-layout ckeditor-tweaks",t.toolbar=[{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Source","-","Bold","Italic","Strike","-","RemoveFormat"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"],items:["NumberedList","BulletedList","-","Blockquote"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"links",items:["Link","Unlink","Anchor"]}],t.toolbarGroups=[{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"links"},{name:"insert"},{name:"forms"},{name:"tools"},{name:"document",groups:["mode","document","doctools"]},{name:"others"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"styles"},{name:"colors"},{name:"about"}]}}.call(this),function(){var t;t=function(t){var e,n;return e=new Object,e.oLink=$(t),e.oPersonRow=e.oLink.parents(".AllAttendees"),e.nAttendee=e.oPersonRow.find(".personId").val(),e.nPerson=e.oPersonRow.find(".personId").val(),e.nAttendee=e.oPersonRow.find(".attendeeId").val(),e.sAction=e.oLink.parent("li, span").attr("class").replace("-action",""),n=e.oPersonRow.find(".PersonLink").html(),e.sPersonName=$.Trim($.ListGetAt(n,2,","))+" "+$.Trim($.ListGetAt(n,1,",")),e},$.fn.isPerson=function(){return this.each(function(){var t,e;return e=$(this),t=e.find(".user-actions .action-menu button").isPersonActionMenu()})},$.fn.isPersonActionLink=function(){return this.each(function(){return $(this).click(function(e){var n,o;switch(o=t(this),o.sAction){case"assess":$.post(sMyself+"Activity.AttendeeDetailAHAH",{ActivityID:nActivity,PersonID:o.nPerson,AttendeeID:o.nAttendee},function(t){return $("#PersonDetailContent").html(t)}),$("#PersonDetailContainer").overlay({top:100,left:50,expose:{color:"#333",loadSpeed:200,opacity:.9},closeOnClick:!1,onClose:function(){return updateRegistrants(nId),$("#PersonDetailContent").html("")},api:!0}).load();break;case"pifform":$.post(sMyself+"Activity.AttendeeCDC",{ActivityID:nActivity,PersonID:o.nPerson,AttendeeID:o.nAttendee},function(t){return $("#pifForm").html(t)}),$("#pifDialog").dialog({title:"PIF Form",modal:!0,autoOpen:!1,position:[40,40],height:450,width:750,resizable:!0,dragStop:function(){},buttons:{Save:function(){return $("#frmCDC").ajaxSubmit(),addMessage("PIF successfully updated.",250,6e3,4e3),$(this).dialog("close")},Cancel:function(){return $(this).dialog("close")}},overlay:{opacity:.5,background:"black"},close:function(){return $("#pifForm").html("")},resizeStop:function(t,e){return $("#pifForm").css("height",e.size.height-73+"px")}}),$("#pifDialog").dialog("open");break;case"eCMECert":$.post(sMyself+"Activity.emailCert",{ActivityID:nActivity,PersonID:o.nPerson,AttendeeID:o.nAttendee},function(t){return $("#email-cert-dialog").html(t)}),$("#email-cert-dialog").dialog({title:"Email Certificate",modal:!0,autoOpen:!0,height:300,width:400,resizable:!1,overlay:{opacity:.5,background:"black"},buttons:{Save:function(){return $("#frmEmailCert").ajaxSubmit({success:function(){return addMessage("Emailed certificate successfully.",250,6e3,4e3)}}),updateActions(),$(this).dialog("close")},Preview:function(){return window.open("Report.CMECert?ActivityID="+nActivity+"&ReportID=5&SelectedMembers="+o.nPerson)},Cancel:function(){return $(this).dialog("close")}},open:function(){},close:function(){return $("#email-cert-dialog").html(""),o.nPerson=""}}),$("#email-cert-dialog").dialog("open");break;case"pCMECert":window.open("Report.CMECert?ActivityID="+nActivity+"&ReportID=5&SelectedMembers="+o.nPerson);break;case"CNECert":window.open("Report.CNECert?ActivityID="+nActivity+"&ReportID=6&SelectedMembers="+o.nPerson);break;case"credits":$.post(sMyself+"Activity.AdjustCredits",{ActivityID:nActivity,PersonID:o.nPerson,AttendeeID:o.nAttendee},function(t){return $("#CreditsDialog").html(t)}),$("#CreditsDialog").dialog({title:"Adjust Credits",modal:!0,autoOpen:!0,height:175,width:400,resizable:!1,overlay:{opacity:.5,background:"black"},buttons:{Save:function(){return $("#formAdjustCredits").ajaxSubmit(),addMessage("Credits successfully updated.",250,6e3,4e3),updateActions(),$(this).dialog("close")},Cancel:function(){return $(this).dialog("close")}},open:function(){},close:function(){return $("#CreditsDialog").html(""),o.nPerson=""}}),$("#CreditsDialog").dialog("open");break;case"togglemd":"Yes"===$("#MDNonMD"+o.nAttendee).html()?n="N":"No"===$("#MDNonMD"+o.nAttendee).html()&&(n="Y"),$.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"updateMDStatus",PersonID:o.nPerson,AttendeeID:o.nAttendee,ActivityID:nActivity,MDNonMD:n,returnFormat:"plain"},function(t){var e,n,o;return e=$.trim(t),n=$.ListGetAt(e,1,"|"),o=$.ListGetAt(e,2,"|"),"Success"===n?(addMessage(o,250,6e3,4e3),updateActions(),updateStats()):addError(o,250,6e3,4e3)}),"Yes"===$("#MDNonMD"+o.nAttendee).html()?$("#MDNonMD"+o.nAttendee).html("No"):"No"===$("#MDNonMD"+o.nAttendee).html()&&$("#MDNonMD"+o.nAttendee).html("Yes");break;case"sendCertificate":confirm("Are you sure you want to send "+o.sPersonName+" a copy of their ceritificate?")&&$.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"sendCertificate",activityId:nActivity,PersonID:o.nPerson,AttendeeID:o.nAttendee,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3)}});break;case"reset":confirm("Are you sure you want to reset the attendee record for "+o.sPersonName+"?")&&(confirm("Do you want to clear all payment information attached to current attendee record for "+o.sPersonName+"?")?resetAttendee(nActivity,o.nAttendee,"Y"):resetAttendee(nActivity,o.nAttendee,"N"));break;case"remove":confirm("Are you sure you would like to remove "+o.sPersonName+" from this activity?")&&$.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"removeCheckedAttendees",AttendeeList:o.nAttendee,ActivityID:nActivity,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?($("#attendeeRow-"+o.nAttendee).fadeOut("medium"),addMessage(t.STATUSMSG,250,6e3,4e3),updateActions(),updateStats()):(addError(t.STATUSMSG,250,6e3,4e3),updateRegistrants(nId),updateActions(),updateStats())}})}return e.preventDefault()})})},$.fn.isPersonActionMenu=function(){var e;return e=$("#action_menu"),this.one("click",function(){var n,o;return n=t(this),o=e.html(),o=$.Replace(o,"{personid}",n.nPerson,"ALL"),o=$.Replace(o,"{activityid}",nActivity,"ALL"),$("body").click(),n.oLink.addClass("clicked").after(o),n.oLink.siblings("ul").find("a").find("span").html(n.sPersonName).end().isPersonActionLink(),$("html").one("click",function(){return n.oLink.removeClass("clicked").blur().siblings("ul").remove().end().isPersonActionMenu(),!1}),!1})}}.call(this),function(){$.widget("custom.combobox",{_create:function(){return this.wrapper=$("<span>").addClass("").insertAfter(this.element),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var t,e;return t=this.element.children(":selected"),e=t.val()?t.text():"",this.input=$("<input>").appendTo(this.wrapper).val(e).attr("placeholder","Type a Folder").addClass("input-block-level ui-widget ui-widget-content ui-state-default").autocomplete({delay:0,autoFocus:!0,minLength:0,source:$.proxy(this,"_source")}).tooltip({tooltipClass:"ui-state-highlight"}),this._on(this.input,{autocompleteselect:function(t,e){return e.item.option.selected=!0,this._trigger("select",t,{item:e.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var t,e;return t=this.input,e=!1,$("<a>").attr("tabIndex",-1).attr("title","Show All Items").tooltip().appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").mousedown(function(){return e=t.autocomplete("widget").is(":visible")}).click(function(){return t.focus(),e?void 0:t.autocomplete("search","")})},_source:function(t,e){var n;return n=new RegExp($.ui.autocomplete.escapeRegex(t.term),"i"),e(this.element.children("option").map(function(){var e;return e=$(this).text(),!this.value||t.term&&!n.test(e)?void 0:{label:e,value:e,option:this}}))},_removeIfInvalid:function(t,e){var n,o,i;if(!e.item&&(o=this.input.val(),i=o.toLowerCase(),n=!1,this.element.children("option").each(function(){return $(this).text().toLowerCase()===i?(this.selected=n=!0,!1):void 0}),!n))return this.input.val("").attr("title",o+" didn't match any item").tooltip("open"),this.element.val(""),this._delay(function(){return this.input.tooltip("close").attr("title","")},2500),this.input.data("ui-autocomplete").term=""},_destroy:function(){return this.wrapper.remove(),this.element.show()}})}.call(this),function(){var t;t=function(t){var e,n,o;return e=new Date((t||"").replace(/-/g,"/").replace(/[TZ]/g," ")),o=((new Date).getTime()-e.getTime())/1e3,n=Math.floor(o/86400),isNaN(n)||0>n||n>=31?$.DateFormat(e,"mmm dd, yyyy"):0===n&&(60>o&&"just now"||120>o&&"1 minute ago"||3600>o&&Math.floor(o/60)+" minutes ago"||7200>o&&"1 hour ago"||86400>o&&Math.floor(o/3600)+" hours ago")||1===n&&"Yesterday"||7>n&&n+" days ago"||31>n&&Math.ceil(n/7)+" weeks ago"},"undefined"!=typeof jQuery&&(jQuery.fn.prettyDate=function(){return this.each(function(){var e;return e=t(this.title),e?jQuery(this).text(e):void 0})})}.call(this),function(){App.module("Components.Debug",function(t,e,n,o,i,a,r){var s,c,l,u,d,p,f,h,m,v,g,y,A;for(this.startWithParent=!1,d=function(t){return!l||!c&&u&&u.log?void 0:l.apply(A,t)},f=function(t){return h>0?h>t:m.length+h<=t},A=r,s=Array.prototype.slice,u=A.console,y={},l=void 0,c=void 0,h=9,m=["error","warn","info","debug","log"],g="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),p=g.length,v=[];--p>=0;)!function(t){return self[t]=function(){return 0!==h&&u&&u[t]&&u[t].apply(u,arguments)}}(g[p]);for(p=m.length;--p>=0;)!function(e,n){return t[n]=function(){var t,o;return t=s.call(arguments),o=[n].concat(t),v.push(o),d(o),u&&f(e)?u.firebug?u[n].apply(A,t):u[n]?u[n](t):u.log(t):void 0}}(p,m[p]);return this.setLevel=function(t){return h="number"==typeof t?t:9},this.setCallback=function(){var t,e,n,o;for(t=s.call(arguments),n=v.length,e=n,l=t.shift()||null,c="boolean"==typeof t[0]?t.shift():!1,e-="number"==typeof t[0]?t.shift():n,o=[];n>e;)o.push(d(v[e++]));return o}},window),App.Components.Debug.start(),App.log=App.Components.Debug.log,App.logInfo=App.Components.Debug.info,App.logError=App.Components.Debug.error,App.logWarn=App.Components.Debug.warn,App.logDebug=App.Components.Debug.debug}.call(this),function(){App.Components.Search=function(){function t(t){var e,n;return this.settings=t,App.logInfo("New Search: "+this.settings.el),this.$base=$(this.settings.el),n=this,n=_.extend(n,Backbone.Events),this.$formEasy=this.$base.find(".js-search-easy"),this.$formAdv=this.$base.find(".js-search-adv"),e=this.$base.find("[data-tooltip-title]"),this.on("search",function(){App.logInfo("search: searched!")}),this.on("result",function(){App.logInfo("search: results!")}),this.on("ready",function(){App.logInfo("search: Ready!")}),e.tooltip({placement:"top",html:"true",trigger:"hover focus",title:function(){return $(this).attr("data-tooltip-title")},container:"body"},!1),n.trigger("ready"),n}return t}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Components.PersonFinder",function(t,n,o,i,a){return this.startWithParent=!1,this.PersonFinder=function(t){function n(t){t=t||{},this.options=t,n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el="",n.prototype.events={"click .dialog-content":"clickTest"},n.prototype.clickTest=function(){return alert("click")},n.prototype.loadMarkup=function(t){var e;return e=t,a.ajax({url:this.options.url,type:"get",data:{instance:this.options.instance,activity:this.options.activityid},success:function(t){return e(t)}})},n.prototype.render=function(){return loadMarkup(function(t){return this.$el.html(a(t))}),this},n.prototype.initialize=function(){},n}(o.View)})}.call(this),function(){App.Components.FormState=function(){function t(t){var e,n,o,i,a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b,S,T,C,I,w,k,P,D;return this.settings=t,App.logInfo("New FormState: "+this.settings.el),y=this,y=_.extend(y,Backbone.Events),r=$(this.settings.el),d=$('<div class="toolbar btn-toolbar test"></div>'),d.prependTo(r.parents(".content-inner :first")),e=$('<div class="ViewSectionButtons btn-group"></div>'),u=$('<div class="SaveInfo js-save-info"></div>'),l=$('<a href="javascript://" class="btn btn-mini js-btn-save">Save Now</a>'),a=$('<a class="btn btn-mini js-btn-discard">Cancel</a>'),l.appendTo(e),c=r.find(":input"),i=r.find(".js-ckeditor"),u.appendTo(d),e.appendTo(d),d.removeClass("hide"),p=c.filter("[data-tooltip-title]"),console.log(p),n=$('<input type="text" class="js-changed-fields hide" name="ChangedFields" value="" />'),o=$('<input type="text" class="js-changed-values hide" name="ChangedValues" value="" />'),r.append(n),r.append(o),r.addClass("js-formstate formstate"),s=r.find(".control-groupset"),s.each(function(){var t,e,n,o;t=$(this),n=t.find(".groupset-title"),e=$("<a></a>"),t.activate=function(){t.addClass("activated")},t.deactivate=function(){t.removeClass("activated")},o=_.defaults(t.data(),{triggerText:"Edit "+n.text()||"Edit",defaultState:1}),e.attr("href","#").addClass("js-groupset-link groupset-link").text(o.triggerText).appendTo(t).on("click",function(){t.activate()}),o.defaultState?t.addClass("activated"):t.removeClass("activated")}),c.each(function(t,e){var n;n=$(e),n.attr("tabindex",t+1)}),this.config=b={buttons:{save:"Save Now",saved:"Saved",saving:"Saving..."}},this.on("reset",function(){App.logInfo("formstate: reset!")}),this.on("beforeSave",function(){App.logInfo("formstate: beforeSave!")}),this.on("save",function(){var t,e;App.logInfo("formstate: saved!"),e=new Date,k(),S(),u.text("Last saved at "+e.getHours()+":"+e.getMinutes()+" "),y.ClearChanges(),t=!0,addMessage("Information saved!",250,6e3,4e3)}),this.on("ready",function(){App.logInfo("formstate: Ready!")}),this.on("change",function(t,e){App.logInfo("formstate: change: "+t),C()?(y.AddChange(e.field,e.value),A()):w()}),g=this.settings.saved||!0,I=!1,h="",m="",p.tooltip({placement:"right",html:"true",trigger:"hover focus",title:function(){return $(this).attr("data-tooltip-title")},container:"body"}),u.html("Last saved "+lastSavedDate),r.append(n),r.append(o),r.find("input,textarea").keyup(function(){var t;t={field:$(this).attr("name"),value:$(this).val()},y.trigger("change","input.keyup!",t)}),r.find(".DatePicker").datepicker({showOn:"focus",showButtonPanel:!0,changeMonth:!0,changeYear:!0,onSelect:function(){var t;t={field:$(this).attr("name"),value:$(this).val()},y.trigger("change","date.chosen!",t)}}),r.find("select").on("change",function(){var t;t={field:$(this).attr("name"),value:$(this).selectedTexts()},y.trigger("change","select.change!",t)}),r.find("input[type='checkbox']").on("click",function(){var t,e,n;t=$(this),n="",t.attr("checked")&&(n=t.data("initialState")),e={field:$(this).attr("name"),value:n},y.trigger("change","checkbox.checked!",e)}),r.find("input[type='radio']").on("click",function(){var t;t={field:$(this).attr("name"),value:$(this).val()},y.trigger("change","radio.checked!",t)}),a.click(function(){return w(),!0}),y.setupCKEDITOR=P=function(t){var e,n,o;return e=t,n=e.attr("id"),CKEDITOR.replace(n,{customConfig:"/app/components/ckeditor-config",on:{blur:function(){var t;return t=$(this.container.$),t.find(".cke_top").css({display:""})},focus:function(){var t;return t=$(this.container.$),t.find(".cke_top").css({display:"block"})},instanceReady:function(){var t;return t=$(this.container.$),this.document.on("keyup",o),this.document.on("paste",o)}}}),o=function(){CKEDITOR.instances[n].updateElement(),e.trigger("keyup")}},i.each(function(){P($(this))}),r.submit(function(){return $(this).ajaxSubmit({type:"post",dataType:"json",beforeSubmit:function(){l.text(b.buttons.saving).removeClass("btn-primary").addClass("disabled").attr("disabled",!0)},success:function(t){t.STATUS?y.trigger("save"):($.each(t.ERRORS,function(t,e){return addError(e.MESSAGE,250,6e3,4e3)}),l.text(b.buttons.save).removeClass("disabled").attr("disabled",!1),g=!1)}}),!1}),y.isDirty=C=function(){return _.some(c,function(t){var e;return e=$(t),e.val()!==e.data("initialState")?!0:!1})},y.resetForm=w=function(){g=!0,i.each(function(){var t,e;t=$(this),e=t.attr("id"),CKEDITOR.instances[e].destroy(),P(t)}),y.ClearChanges(),c.each(function(t,e){var n;n=$(e),n.val(n.data("initialState"))}),S(),a.detach(),y.trigger("reset")},y.disableSave=S=function(){l.removeClass("btn-primary").attr("disabled",!0).addClass("disabled").text(b.buttons.saved).off(),a.detach()},y.enableSave=T=function(){l.attr("disabled",!1).removeClass("disabled").text(b.buttons.save).addClass("btn-primary").on("click",function(t){y.trigger("beforeSave"),r.submit(),t.preventDefault()}),a.appendTo(e)},y.Unsaved=A=function(){g&&T(),App.logInfo("formstate: dirty: "+y.isDirty()),g=!1},y.AddChange=f=function(t,e){var i;""===e&&(e="%20"),$.ListFind(h,t,"|")?(i=$.ListFind(h,t,"|"),m=$.ListSetAt(m,i,e,"|")):(h=$.ListAppend(h,t,"|"),m=$.ListAppend(m,e,"|")),n.val(h),o.val(m)},y.ClearChanges=v=function(){h="",m="",n.val(""),o.val(""),g=!0},y.setInitialState=k=function(){c.each(function(t,e){var n,o;return n=$(e),o=n.val(),"checkbox"===n.attr("type")&&(o=n.attr("checked")?!0:!1),n.data("initialState",o)})},y.activateAllGroupsets=D=function(){return s.each(function(){return $(this).addClass("activated")})},y.deactivateAllGroupsets=D=function(){return s.each(function(){return $(this).removeClass("activated")})},S(),k(),y.trigger("ready"),y}return t}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Collections",function(t,n,o){var i;return t.LinkbarCollection=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(o.Collection)})}.call(this),function(){}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Models",function(t,n,o){var i;return t.Activity=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/api/activity/getActivity",n}(o.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Models",function(t,n,o){var i;return t.Hub=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(o.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Models",function(t,n,o){var i;return t.Person=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/api/person/getPerson",n}(o.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Views",function(t,n,o,i){var a,r,s,c;return t.HubInfobarView=function(t){function n(){return a=n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="hub/infobar_view",n}(i.ItemView),t.HubLinkbarItemView=function(t){function n(){return r=n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="hub/linkbar_item_view",n}(i.ItemView),t.HubLinkbarView=function(n){function o(){return s=o.__super__.constructor.apply(this,arguments)}return e(o,n),o.prototype.template="hub/linkbar_view",o.prototype.itemView=t.HubLinkbarItemView,o}(i.CollectionView),t.HubView=function(t){function n(){return c=n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el=".hub",n.prototype.ui={picture:".hub-bar .profile-picture",linkbar:".hub-bar .linkbar .linkbar-inner"},n.prototype.initialize=function(){},n}(i.ItemView)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Views",function(t){var n;t.ActivityView=function(t){function o(){return n=o.__super__.constructor.apply(this,arguments)}return e(o,t),o.prototype.el=".hub .activity",o.prototype.initialize=function(){},o}(t.HubView)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.module("Views",function(t){var n;t.PersonView=function(t){function o(){return n=o.__super__.constructor.apply(this,arguments)}return e(o,t),o.prototype.el=".hub .person",o.prototype.initialize=function(){},o}(t.HubView)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.Components.NewsFeed=function(){function t(t){var n,o,i,a,r,s;return this.settings=t,App.logInfo("New History: in '"+this.settings.el+"'"),o=this,o=_.extend(o,Backbone.Events),this.$container=$(this.settings.el),this.$list=$('<div class="history-list"></div>'),this.Collection=function(t){function n(){return s=n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.parse=function(t){return t.PAYLOAD},n.prototype.url="/admin/_com/ajax_history.cfc?method=list",n}(Backbone.Collection),i='<div class="history-filter btn-group"></div>',this.$filters=$(i),a=_.template('<a href="" class="btn btn-default" data-mode="<%= filter%>"><%= label%></a>'),console.log(this.settings.modes),_.each(this.settings.modes,function(t,e){var n,i;return console.log(""+t+","+e),i=o.filterTypes[o.settings.hub][t],console.log(i),n=$(a(i)),o.$filters.append(n),n.on("click",function(e){var n,i;return n=$(this),t=n.data("mode"),i=n.text(),o.lister.setMode(t),o.lister.getList(!0),n.siblings(".active").removeClass("active"),n.addClass("active"),e.preventDefault()}),!0}),this.$filters.appendTo(this.$container),this.$list.appendTo(this.$container),this.collection=new this.Collection,n=function(n){function i(e){var n;n=this,t=e,this.setMode=function(e){return t.mode=e},this.setStartRow=function(e){return t.data.startrow=e},this.setMaxRows=function(e){return t.data.maxrows=e},this.getList=function(e,n,i){i||(i="append"),t.data.starttime=n,e&&o.$list.empty(),o.listHistory(t.data,i)}}return e(i,n),i}(Backbone.View),r=_.defaults({startrow:1,maxrows:25},this.settings.queryParams),this.lister=new n({mode:this.settings.defaultMode,appendto:this.$list,data:r}),this.lister.getList(!0),{lister:o.lister}}return t.prototype.filterTypes={person:{personAll:{label:"All",filter:"personAll"},personTo:{label:"To Person",filter:"personTo"},personFrom:{label:"By Person",filter:"personFrom"}},activity:{activityAll:{label:"All",filter:"activityTo"}},user:{personTo:{label:"To Me",filter:"personTo"},personFrom:{label:"By Me",filter:"personFrom"}}},t.prototype.itemTemplate=_.template('<div class="history-item" id="history-item-<%=row.HISTORYID%>">                              <div class="history-line">                                <img src="/admin/_images/icons/<%=row.ICONIMG%>" border="0" />                                <%=content%>                              </div>                              <% if(subcontent) { %>                              <div class="history-subbox clearfix"><%=subcontent%></div>                              <% } %>                              <div class="history-meta">                                <a title="<%=row.CREATED%>">                                <%=row.CREATED%>                                </a>                              </div>                            </div>'),t.prototype.listHistory=function(t,e){var n,o;n=this,o="",this.collection.fetch({data:t,success:function(t){t.each(function(t){var o,i,a;return i=t.attributes,o="",a=n.renderItem(i),"append"===e?(n.$list.append(a),o=$("#history-item-"+i.HISTORYID),o.show()):"prepend"===e&&(n.$list.prepend(n.renderItem(i)),o=$("#history-item-"+i.HISTORYID),o.fadeIn()),o.find(".history-meta a").prettyDate(),o.find(".prettydate").prettyDate(),setInterval(function(){return o.find(".history-meta a").prettyDate()},5e3),setInterval(function(){return o.find(".prettydate").prettyDate()},5e3)})}})},t.prototype.stop=function(){},t.prototype.renderItem=function(t){var e,n,o,i,a;return e=this,i=/\%[A-Za-z]+\%/g,o={content:t.TEMPLATEFROM,subcontent:$.Replace(t.TOCONTENT,"/index.cfm/event/",sMyself,"ALL")||"",row:t},n=_.flatten(o.content.match(i)),n=_.unique(n),a="",_.each(n,function(e){return o.content=$.Replace(o.content,e,t[e.replace(/%/g,"").toUpperCase()],"ALL"),!0}),a=this.itemTemplate(o)},t}()}.call(this),function(){App.module("User",{startWithParent:!1,define:function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g,y,A;g=null,d=null,p=null,a=null,s=null,l=null,r=null,c=null,h=null,m=null,v=null,f=null,u=null,y=null,t.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),t.on("start",function(n){i(document).ready(function(){return A(n),e.logInfo("started: "+t.moduleName)})}),t.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),t.on("linkbar.click",function(e,n){var o,a;a="".split(","),i.each(t.submodules,function(t,e){-1===a.indexOf(t)&&e.stop()}),o=e.data("pjax-container"),i(".content-inner").wrapInner("<div id='"+o.replace("#","")+"'></div>"),i.pjax.click(n,{container:o})}),t._init=A=function(n){var o;t.model=new e.Models.Person(n.model),d=i(".profile"),v=d.find(".titlebar .ContentTitle span"),s=i(".js-infobar"),p=i(".js-projectbar"),u=i(".js-profile-menu > div > div > ul"),a=i(".js-profile-content"),r=i(".js-content-toggle"),c=i(".js-infobar-outer"),o=u.find("a"),i(document).on("pjax:send",function(t){var e,n;e=i(t.relatedTarget),n=e.parent(),n.addClass("loading")}),i(document).on("pjax:timeout",function(t){t.preventDefault()}),i(document).on("pjax:complete",function(t){var e,n,o,r;e=i(t.relatedTarget),o=e.data("pjax-title"),a=i(t.target),n=a.parents(".js-profile-content").find(".content-title > span"),n.text(o),v.text(o),r=e.parent(),document.title=""+o,r.find(".active").removeClass("active"),r.siblings().removeClass("active"),e.children().removeClass("active"),r.addClass("active"),r.removeClass("loading")}),e.logInfo("InfoBar: "+g),i(".ContentTitle span").tooltip({placement:"bottom",trigger:"hover focus",container:"body"}),o.on("click",function(e){var n;n=i(this),t.trigger("linkbar.click",n,e)}),o.tooltip({placement:"right",html:"true",trigger:"hover focus",title:function(){return i(this).attr("data-tooltip-title")},container:"body"}),i(".action-buttons a.btn, .action-buttons button.btn").tooltip({placement:"bottom",trigger:"hover focus",container:"body"})}}})}.call(this),function(){App.module("Activity",{startWithParent:!1,define:function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b,S,T,C,I,w,k,P;e.addRegions({profileRegion:".profile"}),d=null,p=null,a=null,s=null,l=null,r=null,c=null,h=null,m=null,f=null,u=null,y=null,I={0:"exclamation-circle",1:"light-bulb",2:"hourglass",3:"light-bulb-off",4:"cross"},t.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),t.on("start",function(n){i(document).ready(function(){return t._init(n),e.logInfo("started: "+t.moduleName)})}),t.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),t.on("linkbar.click",function(n,o){var a,r;r="Folders,Stats".split(","),i.each(t.submodules,function(t,e){-1===r.indexOf(t)&&e.stop()}),e.logDebug(n.data("pjax-container")),e.logDebug(n),a=n.data("pjax-container"),e.logDebug(a),i(".content-inner").wrapInner("<div id='"+a.replace("#","")+"'></div>"),i.pjax.click(o,{container:a}),e.logDebug("clicked: "+n.attr("data-pjax-title"))
}),t.on("status.changeStart",function(){return e.logDebug("statusChange Started!"),h.addClass("disabled")}),t.on("status.changeEnd",function(t){return e.logDebug("statusChange Ended!"),h.removeClass("disabled"),addMessage("Status changed successfully!",250,6e3,4e3),m.attr("class","").addClass("fg-"+I[t]),f.addClass("activity-status-"+t)}),t._init=function(n){var o;t.model=new e.Models.Activity(n.model),t.linkbarCollection=new e.Collections.LinkbarCollection(n.linkbar),t.linkbarView=new e.Views.HubLinkbarView({collection:t.linkbarCollection}),t.infobarView=new e.Views.HubInfobarView,t.view=new e.Views.ActivityView({model:t.model,linkbar:t.linkbarView,infobar:t.infobarView}),t.data=n,d=i(".profile"),s=i(".js-infobar"),p=i(".js-projectbar"),u=i(".js-profile-menu > div > div > ul"),a=i(".js-profile-content"),l=i(".js-toggle-infobar"),r=i(".js-content-toggle"),c=i(".js-infobar-outer"),o=u.find("a"),f=i(".js-activity-status"),h=f.find("select"),m=i("<i></i>").addClass("fg-exclamation-circle"),f.append(m),i(document).on("pjax:send",function(){}),i(document).on("pjax:timeout",function(t){t.preventDefault()}),i(document).on("pjax:complete",function(t){var e,n,o,r;e=i(t.relatedTarget),o=e.data("pjax-title"),a=i(t.target),n=a.parents(".js-profile-content").find(".content-title > h3"),n.text(o),r=e.parent(),console.log(r),r.find(".active").removeClass("active"),r.siblings().removeClass("active"),e.children().removeClass("active"),r.addClass("active")}),l.on("click",function(){var t;t=i(this),t.hasClass("active")?b():C()}),cActShowInfobar?C():b(),Modernizr.touch||i(".ContentTitle span").tooltip({placement:"bottom",trigger:"hover focus",container:"body"}),o.each(function(){var e;return e=i(this),e.on("click",function(e){var n;n=i(this),t.trigger("linkbar.click",n,e)}),Modernizr.touch?void 0:e.tooltip({placement:"right",html:!0,title:function(){return i(this).attr("data-tooltip-title")},container:"body"})}),Modernizr.touch||i(".action-buttons a.btn, .action-buttons button.btn").tooltip({placement:"bottom",trigger:"hover focus",container:"body"}),h.change(function(){var e;return t.trigger("status.changeStart"),e=i(this).val(),""===e?(addError("You must select a status.",250,6e3,4e3),!1):(T(e),void 0)}),m.attr("class","").addClass("fg-"+I[h.val()]),i("#ActivityList").dialog({title:"Activity List",modal:!1,autoOpen:cActListOpen,height:cActListHeight,width:cActListWidth,position:[cActListPosX,cActListPosY],resizable:!0,dragStop:function(t,e){return i.post(sRootPath+"/_com/UserSettings.cfc",{method:"setActListPos",position:e.position.left+","+e.position.top})},open:function(){return w(),i("#ActivityList").show(),i.post(sRootPath+"/_com/UserSettings.cfc",{method:"setActListOpen",IsOpen:"true"}),i("#ActivityDialogLink").fadeOut()},close:function(){return i("#ActivityList").html(""),i("#ActivityDialogLink").fadeIn(),i.post(sRootPath+"/_com/UserSettings.cfc",{method:"setActListOpen",IsOpen:"false"})},resizeStop:function(t,e){return i.post(sRootPath+"/_com/UserSettings.cfc",{method:"setActListSize",Size:e.size.width+","+e.size.height})}}),i("#ActivityDialogLink").click(function(){return i("#ActivityList").dialog("open")}),i("#MoveDialog").dialog({title:"Move Activity",modal:!0,autoOpen:!1,buttons:{Continue:function(){return i.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"Move",FromActivityID:nActivity,ToActivityID:i("#ToActivity").val()},function(){return window.location=sMyself+"Activity.Detail?ActivityID="+nActivity+"&Message=Activity successfully moved."})},Cancel:function(){return i("#MoveDialog").dialog("close")}},height:400,width:500,resizable:!1,draggable:!1,open:function(){return i("#MoveDialog").show()},close:function(){}}),i("#MoveLink").click(function(){return i("#MoveDialog").dialog("open")}),i("#CopyDialog").dialog({title:"Copy & Paste Activity",modal:!0,autoOpen:!1,height:535,width:485,resizable:!1,draggable:!1,buttons:{Continue:function(){return g()},Cancel:function(){return v(),i("#CopyDialog").dialog("close")}},close:function(){return v()}}),i("#CopyLink").click(function(){return S(nActivityType),i("#CopyDialog").dialog("open"),i("#NewActivityTitle").val("Copy of "+sActivityTitle),i("#NewActivityTitle").focus(),i("#NewActivityTitle").select()}),i(".CopyChoice").change(function(){var t;return t=i.Replace(this.id,"CopyChoice",""),2===t?i("#ParentActivityOptions").hide():i("#ParentActivityOptions").show()}),i("#NewActivityType").bind("change",this,function(){var t;return t=i(this).val(),""!==t?A(t):(i("#NewGroupingSelect").hide(),i("#NewGrouping").val(""))}),i("#OverviewList").dialog({title:"Activity Overview",modal:!1,autoOpen:!1,height:550,width:740,resizable:!1,open:function(){return i.post(sMyself+"Activity.Overview",{ActivityID:nActivity},function(t){return i("#OverviewList").html(t)})},close:function(){return i("#OverviewDialogLink").fadeIn(),i("#OverviewList").html("")},buttons:{Print:function(){return i("#OverviewList").printArea()},Close:function(){return i("#OverviewList").dialog("close")}}}),i("#OverviewDialogLink").click(function(){return i("#OverviewList").dialog("open")}),i("#DeleteActivityLink").bind("click",this,function(){var t;return t=prompt("Do you really want to delete '"+sActivityTitle+"'?  What is the reason?",""),null!=t&&""!==t?i.getJSON(sRootPath+"/_com/AJAX_Activity.cfc",{method:"deleteActivity",ActivityID:nActivity,Reason:t,returnFormat:"plain"},function(t){return t.STATUS?window.location=sMyself+"Activity.Home?Message="+t.STATUSMSG:addError(t.STATUSMSG,250,6e3,4e3)}):addError("Please provide a reason.",250,6e3,4e3)})},g=function(){var t,e,n,o,a,r;return r=i("#NewActivityTitle").val(),o=i("#NewActivityType").val(),a=i("#NewGrouping").val(),t=i(".CopyChoice:checked").val(),e=[],i(".CopyItems:checkbox:checked").map(function(){return e.push(this.value)}).get(),n=0,""===o&&1===t&&(addError("Please select an activity type.",250,6e3,4e3),n+=1),""===r&&(addError("Please enter an activity title.",250,6e3,4e3),n+=1),n>0?!1:(""===a&&(a=0),i.getJSON(sRootPath+"/_com/AJAX_Activity.cfc",{method:"CopyPaste",Mode:t,ItemsToCopy:e.join(),NewActivityTitle:r,NewActivityTypeID:o,NewGroupingID:a,ActivityID:nActivity,ReturnFormat:"plain"},function(t){return t.STATUS?window.location=sMyself+"Activity.Detail?ActivityID="+t.DATASET[0].activityid+"&Message="+t.STATUSMSG:addError(t.STATUSMSG,250,6e3,4e3)}),void 0)},v=function(){},S=function(t){i("#NewActivityType").val(t),A(t)},A=function(t){i("#NewGrouping").removeOption(""),i("#NewGrouping").removeOption(/./),i("#NewGrouping").ajaxAddOption(sRootPath+"/_com/AJAX_Activity.cfc",{method:"getGroupings",ATID:t,returnFormat:"plain"},!1,function(){return""!==i("#NewGrouping").val()?(i("#NewGrouping").val(nGrouping),i("#NewGroupingSelect").show()):(i("#NewGrouping").val(0),i("#NewGroupingSelect").hide())})},C=function(){var t;t=s.parent(),i.cookie("USER_ACTSHOWINFOBAR","true",{path:"/"}),l.addClass("active"),d.removeClass("infobar-inactive").addClass("infobar-active")},b=function(){var t;l.removeClass("active"),i.cookie("USER_ACTSHOWINFOBAR","false",{path:"/"}),t=s.parent(),d.removeClass("infobar-active").addClass("infobar-inactive")},T=t.setStatus=function(e){i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"updateActivityStatus",ActivityID:nActivity,StatusID:e,returnFormat:"plain"},success:function(n){var o;o=i.trim(n),t.trigger("status.changeEnd",e)}})},k=t.updateAll=function(){t.Stats.refresh(function(){}),t.Folders.refresh(function(){}),w()},w=t.updateActivityList=function(){i.post(sMyself+"Activity.ActivityList",{ActivityID:nActivity},function(t){return i("#ActivityList").html(t)})},P=t.updateNoteCount=function(){i.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"getNoteCount",ActivityID:nActivity,returnFormat:"plain"},function(t){var e;return e=i.ListGetAt(i.Trim(t),1,"."),i("#NoteCount").html("("+e+")")})}}})}.call(this),function(){App.module("Person",{startWithParent:!1,define:function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b,S,T,C,I,w;v=null,d=null,p=null,a=null,s=null,l=null,r=null,c=null,h=null,m=null,f=null,u=null,g=null,S={0:"exclamation-circle",1:"light-bulb",2:"hourglass",3:"light-bulb-off",4:"cross"},t.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),t.on("start",function(n){i(document).ready(function(){return w(n),e.logInfo("started: "+t.moduleName)})}),t.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),t.on("linkbar.click",function(e,n){var o,a;a="Folders,Stats".split(","),i.each(t.submodules,function(t,e){-1===a.indexOf(t)&&e.stop()}),o=e.data("pjax-container"),i(".content-inner").wrapInner("<div id='"+o.replace("#","")+"'></div>"),i.pjax.click(n,{container:o})}),t.on("status.changeStart",function(){h.addClass("disabled")}),t.on("status.changeEnd",function(t){return h.removeClass("disabled"),addMessage("Status changed successfully!",250,6e3,4e3),m.attr("class","").addClass("fg-"+S[t]),f.addClass("activity-status-"+t)}),t._init=w=function(n){var o,g;t.model=new e.Models.Person(n.model),d=i(".profile"),s=i(".js-infobar"),p=i(".js-projectbar"),u=i(".js-profile-menu > div > div > ul"),a=i(".js-profile-content"),l=i(".js-toggle-infobar"),r=i(".js-content-toggle"),c=i(".js-infobar-outer"),o=u.find("a"),f=i(".js-activity-status"),h=f.find("select"),m=i("<i></i>").addClass("fg-exclamation-circle"),f.append(m),i(document).on("pjax:send",function(){}),i(document).on("pjax:timeout",function(t){t.preventDefault()}),i(document).on("pjax:complete",function(t){var e,n,o,r;e=i(t.relatedTarget),o=e.data("pjax-title"),a=i(t.target),n=a.parents(".js-profile-content").find(".content-title > h3"),n.text(o),r=e.parent(),r.find(".active").removeClass("active"),r.siblings().removeClass("active"),e.children().removeClass("active"),r.addClass("active")}),g=e.getCookie("prefInfoBar")||"on",e.logInfo("InfoBar: "+v),l.on("click",function(){var t;t=i(this),t.hasClass("active")?y():b()}),"on"===g?b():y(),Modernizr.touch||i(".ContentTitle span").tooltip({placement:"bottom",trigger:"hover focus",container:"body"}),o.on("click",function(e){var n;n=i(this),t.trigger("linkbar.click",n,e)}),Modernizr.touch||(o.tooltip({placement:"right",html:"true",trigger:"hover focus",title:function(){return i(this).attr("data-tooltip-title")},container:"body"}),i(".action-buttons a.btn, .action-buttons button.btn").tooltip({placement:"bottom",trigger:"hover focus",container:"body"})),h.change(function(){var e;return t.trigger("status.changeStart"),e=i(this).val(),""===e?(addError("You must select a status.",250,6e3,4e3),!1):(A(e),void 0)}),m.attr("class","").addClass("fg-"+S[h.val()]),I(),i("#AuthLevel").change(function(){return i.getJSON(sRootPath+"/_com/AJAX_Person.cfc",{method:"setAuthLevel",AccountID:nAccount,AuthorityID:i(this).val(),returnFormat:"plain"},function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3)})}),i("#StatusChanger").change(function(){return i.getJSON(sRootPath+"/_com/AJAX_Person.cfc",{method:"setStatus",PersonID:nPerson,StatusID:i(this).val(),returnFormat:"plain"},function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3)})}),i("#CredentialsContainer").dialog({title:"Credentials",modal:!1,autoOpen:!1,height:325,width:450,resizable:!1,draggable:!1,buttons:{Save:function(){var t,e;return e=i("#NewPassword").val(),t=i("#ConfirmPassword").val(),i.getJSON(sRootPath+"/_com/AJAX_Person.cfc",{method:"saveCredentials",PersonID:nPerson,Pass:e,ConPass:t},function(t){return t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),i("#CredentialsContainer").dialog("close"),i("#NewPassword").val(""),i("#ConfirmPassword").val("")):i.ArrayLen(t.ERRORS)>0?i.each(t.ERRORS,function(t,e){return addError(e.MESSAGE,250,6e3,4e3)}):addError(t.STATUSMSG,250,6e3,4e3)})},Close:function(){return i("#CredentialsContainer").dialog("close"),i("#CredentialsContainer").html("")}},open:function(){return i.post(sMyself+"Person.Credentials",{PersonID:nPerson},function(t){return i("#CredentialsContainer").html(t)}),i("#CredentialsDialogLink").fadeOut()},close:function(){return i("#CredentialsDialogLink").fadeIn()}}),i("#CredentialsDialogLink").click(function(){return i("#CredentialsContainer").dialog("open")}),i("#DeletePersonLink").click(function(){var t;t=prompt("Do you really want to delete "+sPersonName+"?  What is the reason?",""),null!=t&&""!==t?i.getJSON(sRootPath+"/_com/AJAX_Person.cfc",{method:"deletePerson",PersonID:nPerson,Reason:t,returnFormat:"plain"},function(t){return t.STATUS?window.location=sMyself+"Person.Home?Message="+t.STATUSMSG:addError(t.STATUSMSG,250,6e3,4e3)}):addError("Please provide a reason.",250,6e3,4e3)})},b=function(){var t;t=s.parent(),e.setCookie("prefInfoBar","on"),e.logInfo("InfoBar: On ("+e.getCookie("prefInfoBar")+")"),v=!0,l.addClass("active"),s.removeClass("hide"),d.removeClass("infobar-inactive").addClass("infobar-active"),r.removeClass("span24").addClass("span18"),c.addClass("span6")},y=function(){var t;l.removeClass("active"),e.setCookie("prefInfoBar","off"),e.logInfo("InfoBar: Off ("+e.getCookie("prefInfoBar")+")"),v=!1,t=s.parent(),d.removeClass("infobar-active").addClass("infobar-inactive"),r.removeClass("span18").addClass("span24"),s.addClass("hide"),c.removeClass("span6")},A=t.setStatus=function(e){i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"updateActivityStatus",ActivityID:nActivity,StatusID:e,returnFormat:"plain"},success:function(n){var o;o=i.trim(n),t.trigger("status.changeEnd",e)}})},I=function(){},C=function(){},T=function(t){i("#AccountID").html(t)}}})}.call(this),function(){App.module("User.ActivitySearch",function(t,e,n,o,i){var a,r,s,c,l,u,d;return this.startWithParent=!1,t=this,r=null,this.search=null,c=null,l=null,a=null,s=null,this.on("before:start",function(){e.logInfo("starting: Activity."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return d(),e.logInfo("started: Activity."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Activity."+t.moduleName)}),d=function(n){var o,d;d=n,t.search=new e.Components.Search({el:"#js-main-activities"}),r=t.search.$base,c=r.find("#ReleaseDate"),l=r.find("#Title"),a=r.find("#ActivityTypeID"),s=r.find("#Grouping"),o=r.find("#CategoryID"),o.combobox(),c.mask("99/99/9999"),l.unbind("keydown"),l.focus(),u(parseInt(a.val())),a.on("change",function(){return u(parseInt(i(this).val()))})},u=function(t){return 1===t?(console.log(searchSettings.liveOptions),s.html(searchSettings.liveOptions),s.attr("disabled",!1)):2===t?(console.log(searchSettings.emOptions),s.html(searchSettings.emOptions),s.attr("disabled",!1)):(console.log(searchSettings.noOptions),s.html(searchSettings.noOptions),s.attr("disabled",!0))}})}.call(this),function(){App.module("User.NewsFeed",function(t,e,n,o,i){var a,r,s;return this.startWithParent=!1,t=this,a=null,r=null,this.on("before:start",function(){e.logInfo("starting: User."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return s(),e.logInfo("started: User."+t.moduleName)})}),this.on("stop",function(){clearInterval(r),t.feed=null,e.logInfo("stopped: User."+t.moduleName)}),s=function(){t.feed=new e.Components.NewsFeed({el:"#js-main-welcome .js-newsfeed",defaultMode:"personTo",hub:"user",modes:["personTo","personFrom"],queryParams:{personTo:e.User.model.get("id"),personFrom:e.User.model.get("id")}}),a=t.getListAuto=function(){var e;return e=Math.round((new Date).getTime()/1e3),t.feed.lister.getList(!1,e,"prepend")},r=setInterval("App.User.NewsFeed.getListAuto()",5e3)}})}.call(this),function(){App.module("User.PersonSearch",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.ACCME",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){var t;return t=new e.Components.FormState({el:"#js-activity-accme .js-formstate",saved:!0})}})}.call(this),function(){App.module("Activity.Agenda",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.Checklist",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.Committee",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g;return this.startWithParent=!1,t.el={},a=t.el.$container=null,r=t.el.$loading=null,h=0,f="",this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return g(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){t.Ahah.stop(),e.logInfo("stopped: "+t.moduleName)}),this.on("refreshStart",function(){t.Ahah.stop()}),this.on("refreshEnd",function(){t.Ahah.start()}),v=t.updateSelectedCount=function(t){e.logInfo("Count is currently "+parseInt(h)),e.logInfo("Updating Count by "+parseInt(t)),h=parseInt(h)+parseInt(t),0>h&&(h=0),e.logInfo("Count is now "+h),i("#CheckedCount,.js-status-selected-count").html(""+h),h>0?i(".js-selected-actions").find(".btn").removeClass("disabled"):i(".js-selected-actions").find(".btn").addClass("disabled")},c=function(){f="",v(-1*h),i(".js-status-selected-count").html("0")},l=t.getSelected=function(){return f.split(",")},s=t.addSelected=function(t){var n;n=i.extend({},t),n.person&&n.person>0&&(i.ListFind(f,n.person,",")||(f=i.ListAppend(f,n.person,","),v(1))),e.logDebug(f)},d=t.removeSelected=function(t){var n;n=i.extend({},t),n.person&&n.person>0&&i.ListFind(f,n.person,",")&&(n.person&&n.person>0&&(f=i.ListDeleteAt(f,i.ListFind(f,n.person))),v(-1)),e.logDebug(f)},m=t.setRole=function(t,e){i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",dataType:"json",data:{method:"changeCommitteeRoles",PersonList:t,ActivityID:nActivity,RoleID:e,returnFormat:"plain"},success:function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3),u()}})},u=t.refresh=function(){t.trigger("refreshStart"),i.ajax({url:sMyself+"Activity.CommitteeAHAH",type:"get",data:{ActivityID:nActivity},success:function(e){var n;t.el.$container.html(e),t.el.$loading.hide(),n=function(){return i(".js-status-selected-count").text(h),h&&h>0&&i(".js-selected-actions .btn").removeClass("disabled"),i(".js-select-all-rows").each(function(){var t,e,n;return e=i(this),t=e.find(".MemberCheckbox"),n=e.data("key"),i.ListFind(f,n)?t.attr("checked",!0):void 0})},n(),t.trigger("refreshEnd")}})},p=t.save=function(){var t;t=i("#CommitteeID").val(),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"saveCommitteeMember",PersonID:t,ActivityID:nActivity,returnFormat:"plain"},success:function(e){var n,o,a;n=i.trim(e),o=i.ListGetAt(n,1,"|"),a=i.ListGetAt(n,2,"|"),"Success"===o?(m(t,1),u(),i("#PersonWindowCommittee").dialog("close"),addMessage(a,250,6e3,4e3)):"Fail"===o&&(u(),i("#PersonWindowCommittee").dialog("close"),addError(a,250,6e3,4e3))}}),i("#PersonActivityID").val("")},g=function(){t.el.$container=a=i("#CommitteeContainer"),t.el.$loading=r=i("#CommitteeLoading"),u(),i("#CommitteeList").ajaxForm(),i("#RemoveChecked").on("click",function(){var t,e;return confirm("Are you sure you want to remove the checked people from this Activity?")?(e="",t="",i(".MemberCheckbox:checked").each(function(){e=i.ListAppend(e,i(this).val(),",")}),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",dataType:"json",data:{method:"removeCheckedCommittee",PersonList:e,ActivityID:nActivity,returnFormat:"plain"},success:function(t){t.STATUS?(c(),addMessage(t.STATUSMSG,250,6e3,4e3)):addError(t.STATUSMSG,250,6e3,4e3),u()}})):void 0}),i("#RemoveAll").on("click",function(){var t;return confirm("WARNING!\nYou are about to remove ALL people from this Activity!\nAre you sure you wish to continue?")?(t="",i.getJSON(sRootPath+"/_com/AJAX_Activity.cfc",{method:"removeAllCommittee",ActivityID:nActivity,returnFormat:"plain"},function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3),u()})):void 0}),i(".js-change-type").on("click",function(t){var e,n;e=i(this).data("roleid"),n="",i(".MemberCheckbox:checked").each(function(){n=i.ListAppend(n,i(this).val(),",")}),m(n,e),t.preventDefault()})}})}.call(this),function(){App.module("Activity.Committee.Ahah",function(t,e,n,o,i){var a,r,s,c,l,u;return this.startWithParent=!1,r=e.Activity.Committee,s=null,c=null,this.on("before:start",function(){e.logInfo("starting: Activity.Committee."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return u(),e.logInfo("started: Activity.Committee."+t.moduleName)})}),this.on("stop",function(){i("#CommitteeContainer").empty(),e.logInfo("stopped: Activity.Committee."+t.moduleName)}),a=null,l=function(){},u=function(){var t,n;t=i("#CommitteeContainer").find(".js-select-all"),n=i("#CommitteeContainer").find(".js-select-one"),t.on("click",function(){e.logDebug("selectAll Clicked"),t.attr("checked")?n.each(function(){return i(this).attr("checked",!0),s=i.Replace(this.id,"Checked","","ALL"),r.addSelected({person:s}),i(".js-select-all-rows").find("td").css("background-color","#FFD")}):n.each(function(){return i(this).attr("checked",!1),s=i.Replace(this.id,"Checked","","ALL"),r.removeSelected({person:s}),i(".js-select-all-rows").find("td").css("background-color","#FFF")})}),n.on("click",function(){e.logDebug("selectOne Clicked"),i(this).attr("checked")?(s=i.Replace(this.id,"Checked","","ALL"),r.addSelected({person:s}),i("#PersonRow"+s).find("td").css("background-color","#FFD")):(s=i.Replace(this.id,"Checked","","ALL"),r.removeSelected({person:s}),i("#PersonRow"+s).find("td").css("background-color","#FFF"))}),i("#PersonDetail").dialog({title:"Person Detail",modal:!0,autoOpen:!1,height:550,maxWidth:855,resizable:!1,dragStop:function(){},open:function(){i(this).find("iframe").attr("src",sMyself+"Person.Detail?PersonID="+s+"&Mini=1")},close:function(){},resizeStop:function(){}}),i(".PersonLink").on("click",function(t){var e;return e=i(this).parents(".js-row"),s=e.data("key"),c=e.data("name"),i("#PersonDetail").dialog("open",t.preventDefault()),!1})}})}.call(this),function(){App.module("Activity.Create",function(t,e,n,o,i){var a,r,s,c,l;return this.startWithParent=!1,a=null,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return l(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName),a=null}),c=function(t){return 230===parseInt(t)?(i(".stateField").show(),i(".provinceField").hide()):(i(".stateField").hide().css({display:"none"}),i(".provinceField").show())},s=function(t){return"M"===t?(i(".Sessions").fadeIn(),i(".SingleSession").fadeOut()):(i(".Sessions").fadeOut(),i(".SingleSession").fadeIn())},r=function(t){return 1===parseInt(t)?(i("#Grouping").html(LiveOptions),i("#Groupings").show(),i(".Location").show()):2===parseInt(t)?(i("#Groupings").show(),i("#Grouping").html(EMOptions)):(i("#Groupings").hide(),i("#Grouping").html(""),i(".Location").hide()),c(parseInt(i("#Country").val()))},l=function(){console.log("in"),a=new e.Components.FormState({el:"#js-activity-detail .js-formstate",saved:!0}),c(nCountryId),i("#Country").change(function(){c(parseInt(i(this).val()))}),i("#ActivityType").bind("change",this,function(){return r(parseInt(i(this).val()))}),i("#SessionType").change(function(){return s(i(this).val())}),nActivityType&&(i("#ActivityType").val(parseInt(nActivityType)),r(parseInt(nActivityType)),nGrouping&&i("#Grouping").val(parseInt(nGrouping))),sSessionType&&(i("#SessionType").val(sSessionType),s(sSessionType)),"J"===i("#Sponsorship").val()?(i(".js-sponsorship-J").addClass("active"),i("#JointlyTextFld").removeClass("hide")):(i(".js-sponsorship-D").addClass("active"),i("#JointlyTextFld").addClass("hide")),i(".js-sponsorship-toggle").bind("click",function(t){var e;e=i(this),e.hasClass("js-sponsorship-J")?(a.Unsaved(),a.AddChange("Sponsorship","J"),a.AddChange("Sponsor",i("#Sponsor").val()),i("#Sponsorship").val("J"),i("#JointlyTextFld").removeClass("hide")):(a.Unsaved(),a.AddChange("Sponsorship","D"),i("#Sponsorship").val("D"),i("#JointlyTextFld").addClass("hide")),t.preventDefault()})}})}.call(this),function(){App.module("Activity.Credits",function(t,e,n,o,i){var a,r,s;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return s(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),r=null,a=null,s=function(){return e.logInfo("init: credits"),a=i(".js-form-credits"),r=i(".js-credits-save"),r.click(function(){return a.submit(),!1}),a.submit(function(){return i(this).ajaxSubmit({type:"get",dataType:"json",beforeSubmit:function(){r.text("Saving...").attr("disabled",!0)},success:function(t){var e;e=new Date,t.STATUS?(r.text("Save Credits").attr("disabled",!1),addMessage("Saved credits successfully.",250,2e3,2e3)):(i.each(t.ERRORS,function(t,e){return addError(e.MESSAGE,250,6e3,4e3)}),r.text("Save Now").attr("disabled",!1))}}),!1}),i(".CreditBox").each(function(){var t;return t=i.Replace(this.id,"Credits","","ALL"),i(this).attr("checked")?(i("#CreditAmount"+t).attr("disabled",!1),i("#ReferenceNo"+t).attr("disabled",!1)):(i("#CreditAmount"+t).attr("disabled",!0),i("#ReferenceNo"+t).attr("disabled",!0))}),i(".CreditBox").click(function(){var t;return t=i.Replace(this.id,"Credits","","ALL"),i(this).attr("checked")?(i("#CreditAmount"+t).attr("disabled",!1),i("#ReferenceNo"+t).attr("disabled",!1)):(i("#CreditAmount"+t).attr("disabled",!0),i("#ReferenceNo"+t).attr("disabled",!0))})}})}.call(this),function(){App.module("Activity.Faculty",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g;return this.startWithParent=!1,t.el={},a=t.el.$container=null,r=t.el.$loading=null,h=0,f="",this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return g(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){t.Ahah.stop(),e.logInfo("stopped: "+t.moduleName)}),this.on("refreshStart",function(){t.Ahah.stop()}),this.on("refreshEnd",function(){t.Ahah.start()}),v=t.updateSelectedCount=function(t){e.logInfo("Count is currently "+parseInt(h)),e.logInfo("Updating Count by "+parseInt(t)),h=parseInt(h)+parseInt(t),0>h&&(h=0),e.logInfo("Count is now "+h),i("#CheckedCount,.js-status-selected-count").html(""+h),h>0?i(".js-selected-actions").find(".btn").removeClass("disabled"):i(".js-selected-actions").find(".btn").addClass("disabled")},c=function(){f="",v(-1*h),i(".js-status-selected-count").html("0")},l=t.getSelected=function(){return f.split(",")},s=t.addSelected=function(t){var e;e=i.extend({},t),(e.person&&e.person>0?i.ListFind(f,e.person,","):void 0)||(f=i.ListAppend(f,e.person,",")),v(1)},d=t.removeSelected=function(t){var e;e=i.extend({},t),e.person&&e.person>0&&(f=i.ListDeleteAt(f,i.ListFind(f,e.person))),v(-1)},m=t.setFacultyRole=function(t,e){return i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",dataType:"json",data:{method:"changeFacultyRoles",PersonList:t,ActivityID:nActivity,RoleID:e,returnFormat:"plain"},success:function(t){t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),u()):addError(t.STATUSMSG,250,6e3,4e3)}})},g=function(){return t.el.$container=a=i("#FacultyContainer"),t.el.$loading=r=i("#FacultyLoading"),u(),i("#FacultyList").ajaxForm(),i("#RemoveChecked").on("click",function(){var t,e;return confirm("Are you sure you want to remove the checked people from this Activity?")?(e="",t="",i(".MemberCheckbox:checked").each(function(){e=i.ListAppend(e,i(this).val(),",")}),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",dataType:"json",data:{method:"removeCheckedFaculty",PersonList:e,ActivityID:nActivity,returnFormat:"plain"},success:function(t){t.STATUS?(c(),addMessage(t.STATUSMSG,250,6e3,4e3)):addError(t.STATUSMSG,250,6e3,4e3),u()}})):void 0}),i("#RemoveAll").on("click",function(){var t;return confirm("WARNING!\nYou are about to remove ALL people from this Activity!\nAre you sure you wish to continue?")?(t="",i.getJSON(sRootPath+"/_com/AJAX_Activity.cfc",{method:"removeAllFaculty",ActivityID:nActivity,returnFormat:"plain"},function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3),u()})):void 0}),i(".js-change-type").on("click",function(t){var e,n;e=i(this).data("roleid"),n="",i(".MemberCheckbox:checked").each(function(){n=i.ListAppend(n,i(this).val(),",")}),m(n,e),t.preventDefault()})},p=t.save=function(){var t;t=i("#FacultyID").val(),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"saveFacultyMember",PersonID:t,ActivityID:nActivity,returnFormat:"plain"},success:function(e){var n,o,a;n=i.trim(e),o=i.ListGetAt(n,1,"|"),a=i.ListGetAt(n,2,"|"),"Success"===o?(m(t,3),u(),i("#PersonWindowFaculty").dialog("close"),addMessage(a,250,6e3,4e3)):"Fail"===o&&(u(),i("#PersonWindowFaculty").dialog("close"),addError(a,250,6e3,4e3))}}),i("#PersonActivityID").val("")},u=t.refresh=function(){t.trigger("refreshStart"),t.el.$loading.show(),t.el.$container.empty(),i.ajax({url:sMyself+"Activity.FacultyAHAH",type:"get",data:{ActivityID:nActivity},success:function(e){var n;t.el.$container.html(e),t.el.$loading.hide(),n=function(){return i(".js-status-selected-count").text(h),i(".js-select-all-rows").each(function(){var t,e,n;return e=i(this),t=e.find(".MemberCheckbox"),n=e.data("key"),i.ListFind(f,n)?t.attr("checked",!0):void 0})},n(),t.trigger("refreshEnd")}})}})}.call(this),function(){App.module("Activity.Faculty.Ahah",function(t,e,n,o,i){var a,r,s,c,l,u;return this.startWithParent=!1,r=e.Activity.Faculty,s=null,c=null,this.on("before:start",function(){e.logInfo("starting: Activity.Faculty."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return u(),e.logInfo("started: Activity.Faculty."+t.moduleName)})}),this.on("stop",function(){i("#FacultyContainer").empty(),e.logInfo("stopped: Activity.Faculty."+t.moduleName)}),a=null,l=function(){},u=function(){var t,n,o,l;return o=i("#FacultyContainer").find(".js-select-all"),l=i("#FacultyContainer").find(".js-select-one"),t=i(".js-cv-btn"),n=i(".js-disclosure-btn"),t.tooltip({placement:"bottom",trigger:"hover focus",container:"#FacultyContainer",title:function(){return i(this).attr("data-tooltip-title")}}),n.tooltip({placement:"bottom",trigger:"hover focus",container:"#FacultyContainer",title:function(){return i(this).attr("data-tooltip-title")}}),o.on("click",function(){e.logDebug("selectAll Clicked"),o.attr("checked")?l.each(function(){return i(this).attr("checked",!0),s=i.Replace(this.id,"Checked","","ALL"),r.addSelected({person:s}),i(".AllFaculty").css("background-color","#FFD")}):l.each(function(){return i(this).attr("checked",!1),s=i.Replace(this.id,"Checked","","ALL"),r.removeSelected({person:s}),i(".AllFaculty").css("background-color","#FFF")})}),l.on("click",function(){e.logDebug("selectOne Clicked"),i(this).attr("checked")?(s=i.Replace(this.id,"Checked","","ALL"),r.addSelected({person:s}),i("#PersonRow"+s).css("background-color","#FFD")):(s=i.Replace(this.id,"Checked","","ALL"),r.removeSelected({person:s}),i("#PersonRow"+s).css("background-color","#FFF"))}),i("#PersonDetail").dialog({title:"Person Detail",modal:!0,autoOpen:!1,height:550,maxWidth:855,resizable:!1,dragStop:function(){},open:function(){return i(this).find("iframe").attr("src",sMyself+"Person.Detail?PersonID="+s+"&Mini=1")},close:function(){},resizeStop:function(){}}),i(".PersonLink").on("click",function(t){var e;return e=i(this).parents(".js-row"),s=e.data("key"),c=e.data("name"),i("#PersonDetail").dialog("open",t.preventDefault()),!1}),i("#FileUploader").dialog({title:"Upload File",modal:!1,autoOpen:!1,height:320,width:350,resizable:!1,stack:!1,buttons:{Save:function(){return i("#frmFileUpload").ajaxSubmit({beforeSubmit:function(){return i("#Section"+a).html('<img src="/admin/_images/ajax-loader.gif"/><br />Please wait...')
},url:sMyself+"File.Upload&Mode=Person&ModeID="+a+"&ActivityID="+nActivity+"&Submitted=1",type:"post",success:function(){return i("#FileUploader").html(""),addMessage("File uploaded successfully.",250,6e3,4e3),i("#FileUploader").dialog("close")}})},Cancel:function(){return i(this).dialog("close")}},open:function(){return i.post(sMyself+"File.Upload",{Mode:"Person",ModeID:a,ActivityID:nActivity},function(t){return i("#FileUploader").html(t)})},close:function(){return e.Activity.Faculty.refresh()}}),i(".UploadFile").on("click",function(){a=i.ListGetAt(this.id,2,"|"),e.logDebug(a),i("#FileUploader").dialog("open")}),i(".approveFile").on("click",function(){var t,n;t=i.ListGetAt(this.id,1,"|"),n=i.ListGetAt(this.id,2,"|"),s=i.ListGetAt(this.id,3,"|"),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",dataType:"json",data:{method:"approveFacultyFile",ActivityID:nActivity,PersonID:s,FileType:n,Mode:t,returnFormat:"plain"},success:function(t){console.log("hello"),t.STATUS?(e.Activity.Faculty.refresh(),addMessage(t.STATUSMSG,250,6e3,4e3)):(e.Activity.Faculty.refresh(),addError(t.STATUSMSG,250,6e3,4e3))}})})}})}.call(this),function(){App.module("Activity.Files",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g;return this.startWithParent=!1,t.el={},a=t.el.$container=null,r=t.el.$loading=null,h=0,f="",this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return g(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){t.Ahah.stop(),e.logInfo("stopped: "+t.moduleName)}),this.on("refreshStart",function(){t.Ahah.stop()}),this.on("refreshEnd",function(){t.Ahah.start()}),v=t.updateSelectedCount=function(t){e.logInfo("Count is currently "+parseInt(h)),e.logInfo("Updating Count by "+parseInt(t)),h=parseInt(h)+parseInt(t),0>h&&(h=0),e.logInfo("Count is now "+h),i("#CheckedCount,.js-status-selected-count").html(""+h),h>0?i(".js-selected-actions").find(".btn").removeClass("disabled"):i(".js-selected-actions").find(".btn").addClass("disabled")},c=function(){f="",v(-1*h),i(".js-status-selected-count").html("0")},l=t.getSelected=function(){return f.split(",")},s=t.addSelected=function(t){var n;n=i.extend({},t),n.person&&n.person>0&&(i.ListFind(f,n.person,",")||(f=i.ListAppend(f,n.person,","),v(1))),e.logDebug(f)},d=t.removeSelected=function(t){var n;n=i.extend({},t),n.person&&n.person>0&&i.ListFind(f,n.person,",")&&(n.person&&n.person>0&&(f=i.ListDeleteAt(f,i.ListFind(f,n.person))),v(-1)),e.logDebug(f)},m=t.setRole=function(t,e){i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",dataType:"json",data:{method:"changeFileRoles",PersonList:t,ActivityID:nActivity,RoleID:e,returnFormat:"plain"},success:function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3),u()}})},u=t.refresh=function(){t.trigger("refreshStart"),i.ajax({url:sMyself+"Activity.DocsAHAH",type:"get",data:{ActivityID:nActivity},success:function(e){var n;t.el.$container.html(e),t.el.$loading.hide(),n=function(){return i(".js-status-selected-count").text(h),h&&h>0&&i(".js-selected-actions .btn").removeClass("disabled"),i(".js-select-all-rows").each(function(){var t,e,n;return e=i(this),t=e.find(".MemberCheckbox"),n=e.data("key"),i.ListFind(f,n)?t.attr("checked",!0):void 0})},n(),t.trigger("refreshEnd")}})},p=t.save=function(){var t;t=i("#FileID").val(),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"saveFileMember",PersonID:t,ActivityID:nActivity,returnFormat:"plain"},success:function(e){var n,o,a;n=i.trim(e),o=i.ListGetAt(n,1,"|"),a=i.ListGetAt(n,2,"|"),"Success"===o?(m(t,1),u(),i("#PersonWindowFile").dialog("close"),addMessage(a,250,6e3,4e3)):"Fail"===o&&(u(),i("#PersonWindowFile").dialog("close"),addError(a,250,6e3,4e3))}}),i("#PersonActivityID").val("")},g=function(){t.el.$container=a=i("#FilesContainer"),t.el.$loading=r=i("#FilesLoading"),u(),i("#FileList").ajaxForm(),i("#UploadDialog").dialog({title:"Upload File",modal:!1,autoOpen:!1,height:350,width:350,resizable:!1,stack:!1,buttons:{Save:function(){return i("#frmFileUpload").ajaxSubmit({beforeSubmit:function(){},url:sMyself+"File.Upload&Mode=Activity&ModeID="+nActivity+"&ActivityID="+nActivity+"&Submitted=1",type:"post",success:function(){return i("#UploadDialog").html(""),addMessage("File uploaded successfully.",250,6e3,4e3),i("#UploadDialog").dialog("close"),u()}})},Cancel:function(){return i(this).dialog("close"),u()}},open:function(){return i.ajax({url:""+sMyself+"File.Upload",type:"get",data:{Mode:"Activity",ModeID:nActivity,ActivityID:nActivity},success:function(t){return i("#UploadDialog").html(t)}})},close:function(){return u()}}),i(".UploadLink").click(function(){i("#UploadDialog").dialog("open")}),i("#RemoveChecked").on("click",function(){var t,e;return confirm("Are you sure you want to remove the checked people from this Activity?")?(e="",t="",i.ajax({url:sRootPath+"/_com/File/FileAjax.cfc",dataType:"json",data:{method:"removeChecked",DocList:f,ActivityID:nActivity,returnFormat:"plain"},success:function(t){t.STATUS?(c(),addMessage(t.STATUSMSG,250,6e3,4e3)):addError(t.STATUSMSG,250,6e3,4e3),u()}})):void 0})}})}.call(this),function(){App.module("Activity.Files.Ahah",function(t,e,n,o,i){var a,r,s,c,l,u;return this.startWithParent=!1,r=e.Activity.Files,s=null,c=null,this.on("before:start",function(){e.logInfo("starting: Activity.Files."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return u(),e.logInfo("started: Activity.Files."+t.moduleName)})}),this.on("stop",function(){i("#FilesContainer").empty(),e.logInfo("stopped: Activity.Files."+t.moduleName)}),a=null,l=function(){},u=function(){var t,n,o;n=i("#FilesContainer").find(".js-select-all"),o=i("#FilesContainer").find(".js-select-one"),t=i(".js-select-all-rows"),t.each(function(){var t,n,o,a,c,l;return l=i(this),o=l.find(".js-download-file-link"),a=l.find(".js-edit-file-link"),t=l.find(".js-select-one"),n=l.find(".js-copy-file-link"),c=l.find(".js-public-file-link"),a.tooltip({placement:"left",html:"true",trigger:"hover focus",title:function(){return i(this).attr("data-tooltip-title")},container:"body"}),o.tooltip({placement:"left",html:"true",trigger:"hover focus",title:function(){return i(this).attr("data-tooltip-title")},container:"body"}),n.zclip({path:"/assets/ZeroClipboard-c1f3a824a0c3d9d5253890fedd150d3d.swf",copy:function(){return i(this).data("clipboard-text")}}),t.on("click",function(){e.logDebug("selectOne Clicked"),i(this).attr("checked")?(s=i.Replace(this.id,"Checked","","ALL"),r.addSelected({person:s}),l.find("td").css("background-color","#FFD")):(s=i.Replace(this.id,"Checked","","ALL"),r.removeSelected({person:s}),l.find("td").css("background-color","#FFF"))})}),n.on("click",function(){e.logDebug("selectAll Clicked"),n.attr("checked")?o.each(function(){return i(this).attr("checked",!0),s=i.Replace(this.id,"Checked","","ALL"),r.addSelected({person:s}),i(".js-select-all-rows").find("td").css("background-color","#FFD")}):o.each(function(){return i(this).attr("checked",!1),s=i.Replace(this.id,"Checked","","ALL"),r.removeSelected({person:s}),i(".js-select-all-rows").find("td").css("background-color","#FFF")})}),i("#PersonDetail").dialog({title:"Person Detail",modal:!0,autoOpen:!1,height:550,width:855,resizable:!1,dragStop:function(){},open:function(){i(this).find("iframe").attr("src",sMyself+"Person.Detail?PersonID="+s+"&Mini=1")},close:function(){},resizeStop:function(){}}),i(".PersonLink").on("click",function(t){var e;return e=i(this).parents(".js-row"),s=e.data("key"),c=e.data("name"),i("#PersonDetail").dialog("open",t.preventDefault()),!1}),i(".UploadLink").click(function(){i("#UploadDialog").dialog("open")}),i(".PublishLink").on("click",function(){var t,e,n;if(e=i.ListGetAt(this.id,3,"-"),t=i.ListGetAt(this.id,2,"-"),n=prompt("What is the display name of this component?"),null!==n){if(""===n)return addError("You must provide a display name for the component.");i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",dataType:"json",data:{method:"publishFile",ActivityID:nActivity,FileID:e,FileName:n,ComponentID:t,returnFormat:"plain"},success:function(t){t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),r.refresh()):addError(t.STATUSMSG,250,6e3,4e3)}})}}),i(".UnpublishLink").on("click",function(){var t;return t=i.ListGetAt(this.id,2,"-"),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",dataType:"json",data:{method:"UnpublishFile",ActivityID:nActivity,FileID:t,returnFormat:"plain"},success:function(t){t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),r.refresh()):addError(t.STATUSMSG,250,6e3,4e3)}})})}})}.call(this),function(){App.module("Activity.Finances",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.Finances.Budget",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.Finances.Fees",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.Finances.Budget",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.Finances.Support",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Activity.Folders",function(t,e,n,o,i){var a,r,s,c,l,u;return this.startWithParent=!0,a=null,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(n){i(document).ready(function(){return u(n),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),s=t.refresh=function(t){var e;return e=t,i.post(sMyself+"Activity.Container",{ActivityID:nActivity},function(t){return a.html(t),e(!0)})},u=function(){a=i("#Containers"),s(function(){return i(".js-tokenizer-list").uiTokenizer({listLocation:"top",type:"list",showImage:!1,watermarkText:"Type to Add Folder",ajaxAddURL:"/admin/_com/AJAX_Activity.cfc",ajaxAddParams:{method:"createCategory"},ajaxSearchURL:"/admin/_com/ajax/typeahead.cfc",ajaxSearchParams:{method:"search",type:"folders"},onSelect:function(t,e){return l(e),!0},onAdd:function(){return!0},onRemove:function(t,e){return c(e),!0},defaultValue:e.Activity.data.folders})})},l=function(t){i.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"saveCategory",ActivityID:nActivity,CategoryID:t.value,returnFormat:"plain"},function(t){var e,n,o;return e=i.trim(t),n=i.ListGetAt(e,1,"|"),o=i.ListGetAt(e,2,"|"),"Success"===n?addMessage(o,250,6e3,4e3):"Fail"===n?addError(o,250,6e3,4e3):void 0})},r=function(t){var e;e=prompt("Container Name:",""),e&&i.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"createCategory",Name:e,ReturnFormat:"plain"},function(e){return e.STATUS?l(t):addError(statusMsg,250,6e3,4e3)})},c=function(t){var e,n;e=t.value,n=t.label,confirm("Are you sure you want to remove the activity from the container '"+n+"'?")&&i.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"deleteCategory",ActivityID:nActivity,CategoryID:e,returnFormat:"plain"},function(t){return t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),i("#CatRow"+e).remove(),i("#CatAdder").val("")):addMessage(t.STATUSMSG,250,6e3,4e3)})}})}.call(this),function(){App.module("Activity.GeneralInfo",function(t,e,n,o,i){var a,r,s,c,l;return this.startWithParent=!1,a=null,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return l(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName),a=null}),c=function(t){return 230===parseInt(t)?(i(".stateField").show(),i(".provinceField").hide()):(i(".stateField").hide().css({display:"none"}),i(".provinceField").show())},s=function(t){return"M"===t?(i(".Sessions").fadeIn(),i(".SingleSession").fadeOut()):(i(".Sessions").fadeOut(),i(".SingleSession").fadeIn())},r=function(t){return 1===parseInt(t)?(i("#Grouping").html(LiveOptions),i("#Groupings").show(),i(".Location").show()):2===parseInt(t)?(i("#Groupings").show(),i("#Grouping").html(EMOptions)):(i("#Groupings").hide(),i("#Grouping").html(""),i(".Location").hide()),c(parseInt(i("#Country").val()))},l=function(){a=new e.Components.FormState({el:"#js-activity-detail .js-formstate",saved:!0}),c(nCountryId),i("#Country").change(function(){c(parseInt(i(this).val()))}),i("#ActivityType").bind("change",this,function(){return r(parseInt(i(this).val()))}),i("#SessionType").change(function(){return s(i(this).val())}),nActivityType&&(i("#ActivityType").val(parseInt(nActivityType)),r(parseInt(nActivityType)),nGrouping&&i("#Grouping").val(parseInt(nGrouping))),sSessionType&&(i("#SessionType").val(sSessionType),s(sSessionType)),"J"===i("#Sponsorship").val()?(i(".js-sponsorship-J").addClass("active"),i("#JointlyTextFld").removeClass("hide")):(i(".js-sponsorship-D").addClass("active"),i("#JointlyTextFld").addClass("hide")),i(".js-sponsorship-toggle").bind("click",function(t){var e;e=i(this),e.hasClass("js-sponsorship-J")?(a.Unsaved(),a.AddChange("Sponsorship","J"),a.AddChange("Sponsor",i("#Sponsor").val()),i("#Sponsorship").val("J"),i("#JointlyTextFld").removeClass("hide")):(a.Unsaved(),a.AddChange("Sponsorship","D"),i("#Sponsorship").val("D"),i("#JointlyTextFld").addClass("hide")),t.preventDefault()})}})}.call(this),function(){App.module("Activity.History",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: Activity."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: Activity."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Activity."+t.moduleName)}),a=function(){this.feed=new e.Components.NewsFeed({el:"#js-activity-history .js-newsfeed",defaultMode:"activityTo",hub:"activity",modes:["activityAll"],queryParams:{activityTo:e.Activity.model.get("id")}})}})}.call(this),function(){App.module("Activity.Publish.Categories",function(t,e,n,o,i){var a,r;return this.startWithParent=!1,a=null,this.on("before:start",function(){e.logInfo("starting: Publish."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return r(),e.logInfo("started: Publish."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Publish."+t.moduleName),a=null}),r=function(){return a=new e.Components.FormState({el:"#js-activity-pubcategory .js-formstate",saved:!0})}})}.call(this),function(){App.module("Activity.Publish.General",function(t,e,n,o,i){var a,r;return this.startWithParent=!1,a=null,this.on("before:start",function(){e.logInfo("starting: Publish."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return r(),e.logInfo("started: Publish."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Publish."+t.moduleName),i.each(t.submodules,function(t,e){e.stop()})}),r=function(){return a=new e.Components.FormState({el:".js-form-publish",saved:!0})}})}.call(this),function(){App.module("Activity.Publish.Bar",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: Publish."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(t.data),e.logInfo("started: Publish."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Publish."+t.moduleName),i.each(t.submodules,function(t,e){e.stop()})}),a=function(t){var e;return i(".js-progress-info-bar-fill").css({width:t.nFillPercent+"%","background-color":"#"+t.sFillColor}),"Y"===t.publishState?i(".js-publishactivity-btn").hide():i(".js-unpublishactivity-btn").hide(),100!==t.nFillPercent&&i(".js-publishactivity-btn, js-unpublishactivity-btn").attr("disabled","disabled"),e=function(t){return i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",dataType:"json",type:"post",data:{method:"publishActivity",ActivityID:nActivity,returnFormat:"plain"},success:function(e){return e.STATUS?(addMessage(e.STATUSMSG,250,6e3,4e3),t?(i(".js-publishactivity-btn").hide(),i(".js-unpublishactivity-btn").show()):(i(".js-unpublishactivity-btn").hide(),i(".js-publishactivity-btn").show()),updatePublishState):addError(e.STATUSMSG,250,6e3,4e3)}})},i(".js-publishactivity-btn, .js-unpublishactivity-btn").tooltip({placement:"top",trigger:"hover focus",title:function(){return i(this).attr("data-tooltip-title")},container:"body"},i(".js-publishactivity-btn").on("click",function(){return i(".js-publishactivity-btn").attr("disabled")?addError("More progress is required.  See Progress dropdown for more information."):e(!0)}),i(".js-unpublishactivity-btn").on("click",function(){return i(".js-unpublishactivity-btn").attr("disabled")?addError("More progress is required.  See Progress dropdown for more information."):e(!1)}))}})}.call(this),function(){App.module("Activity.Publish.Specialties",function(t,e,n,o,i){var a,r;return this.startWithParent=!1,a=null,this.on("before:start",function(){e.logInfo("starting: Publish."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return r(),e.logInfo("started: Publish."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Publish."+t.moduleName),a=null}),r=function(){return a=new e.Components.FormState({el:"#js-activity-pubspecialty .js-formstate",saved:!0})}})}.call(this),function(){App.module("Activity.Notes",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v;return this.startWithParent=!1,r=null,d=null,c=null,s=null,u=null,l=null,a=null,h='<div class="divider">                  <hr>                </div>                <div class="post-row row-fluid" data-key="<%=id%>">                  <div class="post-item span24">                    <div class="post-author">                      <a href="/admin/event/Activity.Detail?ActivityID=<%=author.id%>" title="View Profile"><%=author.name%></a>                    </div>                    <div class="post-body">                       <%=body%>                    </div>                    <div class="post-meta">                      <i class="icon-calendar"></i> <%=timestamp%>                      <a href="javascript://" class="js-notedelete"><i class="icon-trash"></i></a>                    </div>                  </div>                </div>',f=_.template(h),this.on("before:start",function(){e.logInfo("starting: Activity."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return v(),e.logInfo("started: Activity."+t.moduleName)})}),this.on("stop",function(){r.empty(),e.logInfo("stopped: Activity."+t.moduleName)}),this.on("noteDeleted",function(t){var n;e.logInfo("Deleted Note: "+t),n=d.filter("[data-key='"+t+"']"),n.prev().remove(),n.remove()}),t.resetForm=m=function(){s.val(""),s.blur()},v=function(){r=i("#js-activity-notes"),c=r.find(".js-notebox"),s=r.find(".js-note-body"),u=r.find(".posts-list"),d=u.find(".post-item"),l=r.find(".js-dummynote"),a=r.find(".js-note-actions .addNote"),e.logDebug(u),s.autosize(),l.on("click",function(){c.addClass("activated"),s.focus()}),s.on("focus",function(){c.addClass("focused")}),s.on("blur",function(){""===i(this).val()?c.removeClass("activated focused"):c.removeClass("focused")}),a.on("click",function(t){var e;return e=s.val(),e=e.replace(/\n/g,"<br />"),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",dataType:"json",data:{method:"saveNote",ActivityID:nActivity,NoteBody:e,returnFormat:"plain"},success:function(t){var e,n,o;return t.STATUS?(addMessage(t.STATUSMSG,250,2500,2500),o=t.PAYLOAD,n=i(f(o)),e=n.find(".post-item"),e.find(".js-notedelete").on("click",function(){p(e)}),u.prepend(n),m()):addError(t.STATUSMSG,250,2500,2500)}}),t.preventDefault()}),d.each(function(){var t,e,n,o,a;return t=i(this),e=t.find(".js-notedelete"),o=t.parents(".post-row"),n=o.prev(),a=o.data("key"),e.on("click",function(e){return p(t),e.preventDefault()})})},p=function(t){var e,n,o;return e=t,n=t.parents(".post-row"),console.log(e),console.log(n),o=n.data("key"),confirm("Are you sure you want to delete this note?")?i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",dataType:"json",type:"post",data:{method:"deleteNote",noteid:o,returnFormat:"plain"},success:function(t){t.STATUS?(n.prev().remove(),n.remove(),parent.addMessage(t.STATUSMSG,250,2500,2500)):parent.addError(t.STATUSMSG,250,2500,2500)}}):void 0}})}.call(this),function(){App.module("Activity.Participants",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b,S,T;return this.startWithParent=!1,t.el={},a=t.el.$container=null,r=t.el.$loading=null,y=0,g="",c=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return T(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){t.Ahah.stop(),e.logInfo("stopped: "+t.moduleName)}),this.on("refreshStart",function(){t.Ahah.stop()}),this.on("refreshEnd",function(){t.Ahah.start()}),b=t.updateSelectedCount=function(t){e.logInfo("Count is currently "+parseInt(y)),e.logInfo("Updating Count by "+parseInt(t)),y=parseInt(y)+parseInt(t),0>y&&(y=0),e.logInfo("Count is now "+y),i("#CheckedCount,.js-status-selected-count").html(""+y),y>0?i(".js-selected-actions").find(".btn").removeClass("disabled"):i(".js-selected-actions").find(".btn").addClass("disabled")},d=function(){g="",b(-1*y),i(".js-status-selected-count").html("0")},p=t.getSelected=function(){return g.split(",")},s=t.addSelected=function(t){i.ListFind(g,t,",")||(g=i.ListAppend(g,t,","),b(1)),e.logDebug(g)},h=t.removeSelected=function(t){t&&t>0&&i.ListFind(g,t,",")&&(g=i.ListDeleteAt(g,i.ListFind(g,t)),b(-1)),e.logDebug(g)},v=t.save=function(){i.blockUI({message:"<h1>Adding Attendee...</h1>"}),i.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"saveAttendee",PersonID:i("#AttendeeID").val(),ActivityID:nActivity,returnFormat:"plain"},function(t){var e,n,o;return e=i.trim(t),n=i.ListGetAt(e,1,"|"),o=i.ListGetAt(e,2,"|"),"Success"===n?(f(nId,nStatus),addMessage(o,250,6e3,4e3),i.unblockUI()):"Fail"===n?(addError(o,250,6e3,4e3),i.unblockUI(),i("#AttendeeName").val("Click To Add Attendee")):void 0}),i("#AttendeeID").val(""),i("#AttendeeName").val("Click To Add Attendee")},A=function(t){e.logInfo("setting addl participants"),i.post(sRootPath+"/_com/AJAX_Activity.cfc",{method:"updateAddlAttendees",ActivityID:nActivity,AddlAttendees:t,returnFormat:"plain"},function(t){var e,n,o;e=i.trim(t),n=i.ListGetAt(e,1,"|"),o=i.ListGetAt(e,2,"|"),"Success"===n?(addMessage(o,250,6e3,4e3),c=!1):addError(o,250,6e3,4e3)})},l=function(){i("#CreditsDialog").dialog("close")},S=function(t,e){""!==e?i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"getAttendeeDate",AttendeeId:t,type:e,returnFormat:"plain"},success:function(e){var n;return n=i.Trim(e),i("#datefill-"+t).html(n),i("#editdatelink-"+t).show()}}):(i("#datefill-"+t).html(""),i("#editdatelink-"+t).hide())},m=function(t,e,n){i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",data:{method:"resetAttendee",attendeeId:e,ActivityID:t,PaymentFlag:n,returnFormat:"plain"},success:function(t){t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),updateActions(),updateStats(),f()):addError(t.STATUSMSG,250,6e3,4e3)}})},u=function(t){return t&&t>0&&i.ListFind(selectedAttendees,t,",")?(i("#Checked-"+t).attr("checked",!0),i("#attendeeRow-"+t).css("background-color","#FFD")):void 0},f=t.refresh=function(){t.trigger("refreshStart"),i.ajax({url:sMyself+"Activity.AttendeesAHAH",type:"get",data:{ActivityID:nActivity},success:function(e){var n;t.el.$container.html(e),t.el.$loading.hide(),n=function(){return i(".js-status-selected-count").text(y),y&&y>0&&i(".js-selected-actions .btn").removeClass("disabled"),i(".js-select-all-rows").each(function(){var t,e,n;return e=i(this),t=e.find(".MemberCheckbox"),n=e.data("key"),i.ListFind(g,n)?t.attr("checked",!0):void 0})},n(),t.trigger("refreshEnd")}})},T=function(){var n,o,s;t.el.$container=a=i("#ParticipantsContainer"),t.el.$loading=r=i("#ParticipantsLoading"),i("#ParticipantList").ajaxForm(),n=a.find(".js-addl-attendees-menu"),n.find("form").on("click",function(t){t.stopPropagation()}),parseInt(CookieAttendeeStatus)>0&&(s=i("#attendees-"+CookieAttendeeStatus).text(),i(".js-attendee-filter-button").find("span:first").text(s)),i(".toolbar .dropdown-menu").find("form").click(function(t){t.stopPropagation()}),o=function(t){var e,n,o;o="",e="",n=i("#ActivityRoles").val(),i(".MemberCheckbox:checked").each(function(){return o=i.ListAppend(o,i(this).val(),",")}),i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"updateAttendeeStatuses",AttendeeList:o,ActivityID:nActivity,StatusID:t,returnFormat:"plain"},dataType:"json",success:function(e){var n,o;return n=e.STATUS,o=e.STATUSMSG,n?(addMessage(o,250,6e3,4e3),updateActions(),updateStats(),clearSelectedMembers(),f(nId,t)):addError(o,250,6e3,4e3)}})},parseInt(CookieAttendeePageActivity)===parseInt(nActivity)?parseInt(CookieAttendeeStatusActivity)===parseInt(nActivity)?f(parseInt(CookieAttendeePage),parseInt(CookieAttendeeStatus)):f(parseInt(CookieAttendeePage),parseInt(nStatus)):f(nId,nStatus),i("a.page,a.first,a.last,a.next,a.previous").live("click",function(){var t;return t=i.Mid(this.href,i.Find("page=",this.href)+5,i.Len(this.href)-i.Find("page=",this.href)+4),i.post(sRootPath+"/_com/UserSettings.cfc",{method:"setAttendeePage",ActivityID:nActivity,Page:t}),f(t,nStatus),!1}),i(".attendees-filter li").live("click",function(){var t,e;return t=i(this),t.parents(".btn-group").find(".btn span:first").text(t.text()),e=i.ListGetAt(this.id,2,"-"),i("#ParticipantsContainer").html(""),i("#ParticipantsLoading").show(),i.post(sRootPath+"/_com/UserSettings.cfc",{method:"setAttendeeStatus",ActivityID:nActivity,status:e},function(){return f(1,e)})}),i("#btnStatusSubmit").bind("click",function(){o(i("#StatusID").val())}),i("#AddlAttendees").keyup(function(){var t;e.logInfo("attempting to set addl registrants"),t=i(this),c=!0,delay(function(){return c?(e.logInfo("waited 2500ms now setting addl registrants"),A(t.val())):void 0},2500)}),i("#AddlAttendees").bind("blur",function(){var t;t=i(this),c&&A(t.val())}),i("#RemoveChecked").bind("click",function(){var t;return confirm("Are you sure you want to remove the checked attendees from this activity?")?(t="",i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"removeCheckedAttendees",AttendeeList:g,ActivityID:nActivity,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),d()):addError(t.STATUSMSG,250,6e3,4e3),f(nId,nStatus)}})):void 0}),i("#RemoveAll").bind("click",function(){var t;return confirm("WARNING!\nYou are about to remove ALL attendees from this Activity!\nAre you sure you wish to continue?")?(t="",i.ajax({url:sRootPath+"/_com/AJAX_Activity.cfc",type:"post",data:{method:"removeAllAttendees",ActivityID:nActivity,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),updateActions(),updateStats(),clearSelectedMembers(),f(nId,nStatus)):(addError(t.STATUSMSG,250,6e3,4e3),updateActions(),updateStats(),f())}})):void 0}),i("#PrintCMECert").bind("click",this,function(){return"checked"===i("#PrintSelected").attr("checked")?window.open("http://www.getmycme.com/activities/"+nActivity+"/certificates?attendees="+selectedAttendees):window.open(sMyself+"Report.CMECert?ActivityID="+nActivity+"&ReportID=5")}),i("#PrintCNECert").bind("click",this,function(){return"checked"===i("#PrintSelected").attr("checked")?""!==selectedAttendees?window.open(sMyself+"Report.CNECert?ActivityID=' nActivity + '&ReportID=6&selectedAttendees="+selectedAttendees):addError("You must select registrants",250,6e3,4e3):window.open(sMyself+"Report.CNECert?ActivityID="+nActivity+"&ReportID=6")}),i(".PrintSigninSheet").bind("click",this,function(){return"checked"===i("#PrintSelected").attr("checked")?""!==selectedAttendees?"Y"===i.ListGetAt(this.id,2,"|")?window.open(sMyself+"Report.SigninSheet?ActivityID="+nActivity+"&ssn=1&ReportID=12&selectedAttendees="+selectedAttendees):window.open(sMyself+"Report.SigninSheet?ActivityID="+nActivity+"&ssn=0&ReportID=12&selectedAttendees="+selectedAttendees):addError("You must select registrants",250,6e3,4e3):"Y"===i.ListGetAt(this.id,2,"|")?window.open(sMyself+"Report.SigninSheet?ActivityID="+nActivity+"&ssn=1&ReportID=12"):window.open(sMyself+"Report.SigninSheet?ActivityID="+nActivity+"&ssn=0&ReportID=12")}),i("#PrintMailingLabels").bind("click",this,function(){return"checked"===i("#PrintSelected").attr("checked")?""!==selectedMembers?window.open(sMyself+"Report.MailingLabels?ActivityID="+nActivity+"&ReportID=3&Print=1&selectedAttendees="+selectedAttendees):addError("You must select registrants",250,6e3,4e3):window.open(sMyself+"Report.MailingLabels?ActivityID="+nActivity+"&ReportID=3&Print=1")}),i("#PrintNameBadges").bind("click",this,function(){return"checked"===i("#PrintSelected").attr("checked")?""!==selectedMembers?window.open(sMyself+"Report.NameBadges?ActivityID="+nActivity+"&selectedMembers="+selectedMembers):addError("You must select registrants",250,6e3,4e3):window.open(sMyself+"Report.NameBadges?ActivityID="+nActivity)}),i(".importDialog").dialog({title:"Batch Attendee Import",modal:!1,autoOpen:!1,height:200,maxWidth:500,buttons:{Done:function(){return f(),i(".importDialog").find("iframe").attr("src",sMyself+"activity.import?activityid="+nActivity),i(".importDialog").dialog("close")}}}),i(".newImportDialog").dialog({title:"Batch Attendee Import",modal:!1,autoOpen:!1,height:550,maxWidth:670,buttons:{Done:function(){return f(),i(".newImportDialog").find("iframe").attr("src","<cfoutput>#Application.Settings.apiUrl#</cfoutput>/imports?importable_id="+nActivity),i(".newImportDialog").dialog("close")}}}),i(".batchLink").click(function(){return i(".newImportDialog").dialog("open")}),i(".js-change-status").on("click",function(){return o(i(this).data("key"))}),e.trigger("activity.participants.load")}})}.call(this),function(){App.module("Activity.Participants.Ahah",function(t,e,n,o,i){var a,r,s,c,l,u;return this.startWithParent=!1,r=e.Activity.Participants,s=null,c=null,this.on("before:start",function(){e.logInfo("starting: Activity.Participants."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return u(),e.logInfo("started: Activity.Participants."+t.moduleName)})}),this.on("stop",function(){i("#ParticipantsContainer").empty(),e.logInfo("stopped: Activity.Participants."+t.moduleName)}),a=null,l=function(){},u=function(){var t,n;t=i("#ParticipantsContainer").find(".js-select-all"),n=i("#ParticipantsContainer").find(".js-select-one"),t.on("click",function(){e.logDebug("selectAll Clicked"),t.attr("checked")?n.each(function(){var t,e,n;return e=i(this),t=e.parents(".js-row"),e.attr("checked",!0),n=t.data("key"),r.addSelected(n),i(".js-select-all-rows").find("td").css("background-color","#FFD")}):n.each(function(){var t,e,n;return e=i(this),t=e.parents(".js-row"),e.attr("checked",!1),n=t.data("key"),r.removeSelected(n),i(".js-select-all-rows").find("td").css("background-color","#FFF")})}),n.on("click",function(){var t,n,o;n=i(this),t=n.parents(".js-row"),e.logDebug("selectOne Clicked"),n.attr("checked")?(o=t.data("key"),r.addSelected(o),i("#PersonRow"+s).find("td").css("background-color","#FFD")):(o=t.data("key"),r.removeSelected(o),i("#PersonRow"+s).find("td").css("background-color","#FFF"))}),i(".js-row").each(function(){var t,e,n,o,a;return n=i(this),a=n.data("key"),o=n.data("personkey"),n.isPerson(),o>0?e=n.find(".PersonLink"):(t=n.find(".deleteLink"),t.one("click",function(){return i.ajax({type:"post",url:"/admin/_com/ajax_activity.cfc",dataType:"json",data:{method:"removeAttendeeByID",attendeeId:a},async:!1,success:function(t){return t.STATUS?n.remove():void 0
}})})),n.find(".StatusDate .label").popover({placement:"top",trigger:"hover",html:!0,container:"body"})}),e.logInfo("binding records"),i(".js-status-selected-count").text(SelectedCount)}})}.call(this),function(){App.module("Activity.PhotoUpload",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: Activity."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: Activity."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Activity."+t.moduleName)}),a=function(){var t,n,o;t=i(".js-upload-field"),n=i(".js-upload-form"),o=i(".profile-picture"),t.on("change",function(t){return t.preventDefault,n.ajaxSubmit({url:"/admin/_com/ajax_activity.cfc?method=saveprimaryphoto&ActivityID="+e.Activity.model.get("id"),target:o,dataType:"json",beforeSubmit:function(t){var e;return e=i.param(t),o.addClass("faded"),!0},uploadProgress:function(){return console.log("testing")},success:function(t){return o.removeClass("faded"),t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),o.css("background-image",'url("'+t.DATASET.path+t.DATASET.hash+'.jpg")')):void 0},error:function(){return o.removeClass("faded")},reset:!0})})}})}.call(this),function(){App.module("Activity.Publish",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName),i.each(t.submodules,function(t,e){e.stop()})}),a=function(){}})}.call(this),function(){App.module("Activity.Reports",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){var t,e;t=i("#js-activity-reports"),e=t.find(".report-item"),e.each(function(){var t,e,n,o,a,r;t=i(this),n=t.find("form"),o=t.parents(".report-group"),r=t.find(".report-item-title"),r.wrapInner('<a href="javascript://"></a>'),a=t.find(".report-item-title > a"),e=t.find(".report-item-criteria"),a.on("click",function(e){t.siblings().removeClass("activated"),o.siblings().find(".report-item").removeClass("activated"),t.addClass("activated"),e.preventDefault()})})}})}.call(this),function(){App.module("Activity.Stats",function(t,e,n,o,i){var a,r,s,c,l,u,d,p;return this.startWithParent=!0,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return p(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),s=null,c=null,l=null,a=null,r=null,d=t.refresh=function(e){var n;n=e,i.post(sMyself+"Activity.Stats",{ActivityID:nActivity},function(e){return s.html(e),t.trigger("refresh.complete"),n(!0)})},this.on("refresh.complete",function(){s.append(r),s.css("color","#333"),a.removeClass("icon-spin"),r.click(function(){return u()})}),this.on("recalculate.start",function(){a.addClass("icon-spin"),s.css("color","#EEE")}),this.on("recalculate.end",function(){d(function(){})}),u=t.recalc=function(){t.trigger("recalculate.start"),a.addClass("icon-spin"),i.ajax({url:"/admin/_com/scripts/statFixer.cfc",type:"post",async:!1,dataType:"json",data:{method:"run",returnFormat:"plain",mode:"manual",activityId:nActivity},success:function(e){return e.STATUS?(c.css("color","#333"),t.trigger("recalculate.end")):(l.hide(),c.show(),t.trigger("recalculate.end"))}})},p=function(){s=i("#ActivityStats"),c=i("#stats-container"),l=i("#stats-loading"),a=i('<i class="icon-arrows-cw"></i>'),r=i("<a></a>").addClass("btn btn-default stats-refresher js-stats-refresher").html(a),d(function(){})}})}.call(this),function(){App.module("Person.Activities",function(t,e,n,o,i){var a,r,s,c,l,u;return this.startWithParent=!1,a=null,r=null,this.config={transcript:{height:50,width:50}},c='<div class="js-move-activities modal">                  <div class="modal-header">                     <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>                      <h3 id="myModalLabel">Move Activities</h3>                  </div>                  <div class="modal-body">                    <form action="" method="post" name="formMoveActivities" class="form-horizontal">                      <div class="control-group">                        <label class="control-label">From</label>                        <div class="controls">                          <input type="text" name="moveFromPersonID" class="js-typeahead-person-from" />                        </div>                      </div>                      <div class="control-group">                        <label class="control-label">Move To</label>                        <div class="controls">                          <input type="text" name="moveToPersonID" class="js-typeahead-person-to" />                        </div>                      </div>                      <div class="control-group">                        <div class="controls"><input type="submit" value="Move Activities" /></div>                      </div>                    </form>                  </div>                  <div class="modal-footer">                    <button class="btn btn-primary">Move Now</button>                    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>                  </div>                </div>',this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a=i("#js-person-activities"),u(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName)}),u=function(){var t,n,o,s,u,d,p,f,h,m;h=a.find(".js-transcript-menu"),r=a.find(".js-transcript-date"),m=i(r[0]),f=i(r[1]),p=a.find(".js-transcript-button"),u=i(c),n=u.find("form"),o=i(n.find(".js-typeahead-person-from")),d=i(n.find(".js-typeahead-person-to")),o.uiTypeahead({showImage:!1,allowAdd:!1,ajaxSearchURL:"/admin/_com/ajax/typeahead.cfc",ajaxSearchParams:{method:"search",type:"person"},defaultValue:{id:e.Person.model.get("id"),label:e.Person.model.get("name"),value:e.Person.model.get("id")}}),d.uiTypeahead({showImage:!1,allowAdd:!1,ajaxSearchURL:"/admin/_com/ajax/typeahead.cfc",ajaxSearchParams:{method:"search",type:"person"}}),n.submit(function(){return!1}),s=u.modal({backdrop:!0,keyboard:!0,show:!1}),p.on("click",function(){var t,e,n,o;return o=Date.parseString(m.val()),t=Date.parseString(f.val()),_.isDate(o)&&_.isDate(t)?(n=o.format("MM/dd/yyyy"),e=t.format("MM/dd/yyyy"),l(n,e)):addError("Please ensure you have specified a valid Start and End Date.")}),t=a.find(".js-moveactivities"),t.on("click",function(){s.modal("show")}),h.next().find("form").on("click",function(t){t.stopPropagation()}),r.datepicker({showOn:"button",buttonImage:"/admin/_images/icons/calendar.png",buttonImageOnly:!0,showButtonPanel:!0,changeMonth:!0,changeYear:!0})},l=function(n,o){var i,a,r,s;return i=t.config.transcript,s="height="+i.height+",width="+i.width+",location=0,menubar=0,resizable=no,scrollbars=0,status=0,centerscreen=yes",r=""+e.config.get("apiUrl")+"/users/"+e.Person.data.id+"/transcript?startdate="+n+"&enddate="+o,a=window.open(r,"transcript_show",s),window.focus&&a.focus(),!1},s=function(){var t,e,n;return""!==i("#MoveActivitiesID").val()&&(t=confirm("Are you sure you want to move the activites from "+sFullName+" to"+i.ListGetAt(i("#MoveActivitiesName").val(),2,",")+i.ListGetAt(i("#MoveActivitiesName").val(),1,",")+"?"))?(e=i("#MoveActivitiesID").val(),n=i.ListGetAt(i("#MoveActivitiesName").val(),2,",")+i.ListGetAt(i("#MoveActivitiesName").val(),1,","),i.getJSON(sRootPath+"/_com/AJAX_Person.cfc",{method:"moveActivities",MoveToPersonID:e,MoveToName:n,MoveFromPersonID:nPerson,MoveFromName:sFullName,returnFormat:"plain"},function(t){return window.location=sMyself+"Person.Activities?PersonID="+e+"&Message="+t.STATUSMSG})):void 0}})}.call(this),function(){App.module("Person.Addresses",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g;return this.startWithParent=!1,l=null,s=null,c=null,u=null,a=null,r=null,this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return l=i("#js-person-address"),g(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName)}),this.on("address:save",function(t){t.STATUS?(u.dialog("close"),addMessage(t.STATUSMSG,250,6e3,4e3),v()):addError(t.STATUSMSG,250,6e3,4e3)}),this.on("form:loaded",function(n){var o,a,s,c,l,d;e.logDebug("Address Form LOADED"),c=i(n),r=c,a=r.find("#editaddress-country"),o=r.find(".canada"),l=r.find(".unitedstates"),s=r.find(".js-typeahead-city"),s.uiTypeahead({showImage:!1,allowAdd:!1,ajaxSearchURL:"/admin/_com/ajax/typeahead.cfc",ajaxSearchParams:{method:"search",type:"city"}}),d=function(t){e.logDebug("country: "+t),230===parseInt(t)?(o.hide(),l.show()):39===parseInt(t)?(l.hide(),o.show()):(l.hide(),o.hide())},d(a.val()),a.change(function(){d(i(this).val())}),r.on("submit",function(){return i(this).ajaxSubmit({url:sRootPath+"/_com/AJAX_Person.cfc",type:"post",dataType:"json",success:function(e){return t.trigger("address:save",e)}}),!1}),u.html(r),u.dialog({title:"Address Information",modal:!0,autoOpen:!1,height:450,width:600,draggable:!1,resizable:!1,buttons:{Save:function(){r.submit()},Cancel:function(){i(this).dialog("close")}},open:function(){},close:function(){i(this).html("")}}),t.trigger("form:ready")}),this.on("form:ready",function(){e.logDebug("Address Form is Ready!"),u.dialog("open")}),this.on("ahah:ready",function(t){s.html(t),c.hide(),s.find(".js-list-row").each(function(){var t,e,n,o,a,r,c,l;a=i(this),c=a.data("key"),r=a.find("[data-tooltip-title]"),e=a.find(".address-edit"),t=a.find(".address-delete"),o=a.find(".address-makeprimary"),l=a.find(".js-country-code"),n=a.find(".js-phonenumber"),l||(l="US"),n.each(function(){var t,e,n;t=i(this),n=t.text(),e=PhoneNumber.Parse(n),console.log(n),console.log(e)}),o.on("click",function(){h(c)}),e.on("click",function(){p(c)}),t.on("click",function(){var t;t=confirm("Are you sure you want to delete this address?"),t&&d(c)}),r.tooltip({placement:"top",html:"true",trigger:"hover focus",title:function(){return i(this).attr("data-tooltip-title")},container:s}),a.hover(function(){return i(this).addClass("hovered")},function(){return i(this).removeClass("hovered")})})}),g=function(){return s=l.find("#AddressesContainer"),c=l.find("#AddressesLoading"),u=i('<div id="address-info"></div>'),u.appendTo("body"),a=l.find(".address-add"),v(),a.on("click",function(){return m()})},h=t.makePrimary=function(t){return i.ajax({url:"/admin/_com/AJAX_Person.cfc",dataType:"json",type:"post",data:{method:"setPrimaryAddress",returnformat:"plain",person_id:nPerson,address_id:t},success:function(t){t.STATUS?(v(),addMessage(t.STATUSMSG)):addError(t.STATUSMSG)}})},p=t.editAddress=function(t){return f(t)},d=t.editAddress=function(t){return i.ajax({url:sRootPath+"/_com/AJAX_Person.cfc",dataType:"json",type:"post",data:{method:"deleteAddress",PersonID:nPerson,AddressID:t,returnFormat:"plain"},success:function(t){t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),v()):addError(t.STATUSMSG,250,6e3,4e3)}})},m=t.newAddress=function(){return f(0)},f=t.loadForm=function(e){return i.ajax({url:sMyself+"Person.EditAddress",dataType:"html",type:"get",data:{PersonID:nPerson,AddressID:e},success:function(e){var n;n=i.trim(e),t.trigger("form:loaded",n)}})},v=t.refresh=function(){return i.ajax({url:sMyself+"Person.AddressAHAH",type:"get",dataType:"html",data:{PersonID:nPerson},success:function(e){return t.trigger("ahah:ready",e)}})}})}.call(this),function(){App.module("Person.Emails",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b,S;this.startWithParent=!1,l=null,s=null,c=null,a=null,r=null,d=null,u=null,p=null,g=0,m=null,this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return l=i("#js-person-email"),S(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){l.empty().remove(),e.logInfo("stopped: Person."+t.moduleName)}),this.on("ahah:ready",function(t){return s.html(t),c.hide(),i(".view-row").each(function(){var t,e,n,o,a,r,c;return o=i(this),c=o.data("key"),a=o.find("[data-tooltip-title]"),t=o.find(".delete-link"),r=o.find(".isverified-link"),n=o.find(".makeprimary-link"),e=o.find(".allowlogin-link"),t.on("click",function(){v(c,o)}),n.on("click",function(){A(c)}),r.on("click",function(){b(c)}),e.on("click",function(){var t,e;t=i(this).data("button-action"),e="enable"===t?1:0,h(c,e)}),a.tooltip({placement:"top",html:"true",trigger:"hover focus",title:function(){return i(this).attr("data-tooltip-title")},container:s}),o.hover(function(){return i(this).addClass("hovered")},function(){return i(this).removeClass("hovered")})})}),S=function(){var t;s=l.find("#EmailContainer"),c=l.find("#EmailLoading"),a=l.find(".js-email-add"),r=l.find("form"),d=r.find(".email_address"),u=r.find(".cancel-link"),p=r.find(".save-link"),t=l.find("#addEmailAddress"),u.click(function(){d.val(""),a.hide()}),r.submit(function(){return r.ajaxSubmit({type:"post",dataType:"json",success:function(t){t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),m="",y()):t.ERRORS.length>0?i.each(t.ERRORS,function(t,e){return addError(e.MESSAGE,250,6e3,4e3)}):addError(t.STATUSMSG,250,6e3,4e3)}}),!1}),y(),t.click(function(){return f()})},f=function(){return a.show(),d.focus()},v=function(t,e){var n,o,a;return a=t,n=e,o=n.find(".email-address").text(),confirm("Are you sure you want to delete the email address '"+o+"'?  It will be permanently removed from the database.")&&0!==a?(i.ajax({url:sRootPath+"/_com/ajax_person.cfc",type:"post",data:{method:"deleteEmail",person_id:nPerson,email_id:a,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),y()):t.ERRORS.length>0?i.each(t.ERRORS,function(t,e){return addError(e.MESSAGE,250,6e3,4e3)}):addError(t.STATUSMSG,250,6e3,4e3)}}),e.remove()):void 0},A=function(t){var e;return e=t,i.ajax({url:sRootPath+"/_com/ajax_person.cfc",type:"post",data:{method:"setPrimaryEmail",email_id:e,person_id:nPerson,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),y()):addError(t.STATUSMSG,250,6e3,4e3)}})},y=t.refresh=function(){return i.ajax({url:sMyself+"Person.EmailAHAH",type:"get",dataType:"html",data:{PersonID:nPerson},success:function(e){return t.trigger("ahah:ready",e)}})},h=function(t,e){var n;n=t,i.ajax({url:sRootPath+"/_com/ajax_person.cfc",type:"post",data:{method:"setAllowLogin",email_id:n,value:e,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?(y(),addMessage(t.STATUSMSG,250,6e3,4e3)):addError(t.STATUSMSG,250,6e3,4e3)}})},b=function(t){var e;e=t,i.ajax({url:sRootPath+"/_com/ajax_person.cfc",type:"post",data:{method:"sendVerificationEmail",email_id:e,returnFormat:"plain"},dataType:"json",success:function(t){return t.STATUS?addMessage(t.STATUSMSG,250,6e3,4e3):addError(t.STATUSMSG,250,6e3,4e3)}})}})}.call(this),function(){App.module("Person.Finder",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName)}),a=function(){}})}.call(this),function(){App.module("Person.GeneralInfo",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b;return this.startWithParent=!1,h=null,a=null,l=null,c=null,d=null,u=null,p=null,s=null,r=null,f=null,m=[],g=_.template('<div class="item" data-suggestion="<%=suggestion%>"><a href="#"><%=suggestion%></a></div>'),v=function(t){return _.template(t)},m.push(v("<% if (firstname) { %><%= firstname %><% } %><% if (middlename) { %> <%= middlename %><% } %><% if (lastname) { %> <%= lastname %><% } %><% if (suffix) { %>, <%= suffix %><% } %>")),m.push(v("<% if (firstname) { %><%= firstname %><% } %><% if (middlename) { %> <%= middlename.substring(0,1) %>.<% } %><% if (lastname) { %> <%= lastname %><% } %><% if (suffix) { %>, <%= suffix %><% } %>")),m.push(v("<% if (firstname) { %><%= firstname.substring(0,1) %>.<% } %><% if (middlename) { %> <%= middlename %><% } %><% if (lastname) { %> <%= lastname %><% } %><% if (suffix) { %>, <%= suffix %><% } %>")),m.push(v("<% if (firstname) { %><%= firstname.substring(0,1) %>.<% } %><% if (middlename) { %> <%= middlename.substring(0,1) %>.<% } %><% if (lastname) { %> <%= lastname %><% } %><% if (suffix) { %>, <%= suffix %><% } %>")),m.push(v("<% if (firstname) { %><%= firstname %><% } %><% if (lastname) { %> <%= lastname %><% } %><% if (suffix) { %>, <%= suffix %><% } %>")),m.push(v("<% if (firstname) { %><%= firstname.substring(0,1) %>.<% } %><% if (lastname) { %> <%= lastname %><% } %><% if (suffix) { %>, <%= suffix %><% } %>")),this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return b(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName),h=null}),b=function(){var t;a=i("#js-person-detail"),l=a.find(".js-formstate"),c=l.find("[name='firstname']"),d=l.find("[name='middlename']"),u=l.find("[name='lastname']"),p=l.find("[name='suffix']"),r=l.find("[name='certname']"),s=l.find(".js-displayname-input"),f=l.find(".js-suggestions-list"),t=i(".js-suggest-input"),h=new e.Components.FormState({el:"#js-person-detail .js-formstate",saved:!0}),h.on("beforeSave",function(){r.val(s.val())}),A(),i(".certname").click(function(){return y(i(this).val())}),i("#certnamecustom").keyup(function(){return y(i(this).val())}),i(".certname").attr("checked")===!1&&""!==sCertName&&(i("#certnamecustom").val(sCertName),i("#certname-7").attr("checked",!0)),t.on("keyup",function(){return A()})},A=function(){var t,e;f.empty(),t={firstname:i.trim(c.val()),middlename:i.trim(d.val()),lastname:i.trim(u.val()),suffix:i.trim(p.val())},e=_.map(m,function(e){return e(t)}),e=_.unique(e),_.each(e,function(t){var e;return e=i(g({suggestion:t})),e.on("click",function(t){var e;e=i(this).data("suggestion"),s.val(e).keyup(),t.preventDefault()}),f.append(e)}),""!==i.trim(s.val())||_.isEmpty(e)||s.val(e[0])},y=function(t){i("#certnamecustom").val(t),i("#certname-7").val(t)}})}.call(this),function(){App.module("Person.History",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName)}),a=function(){this.feed=new e.Components.NewsFeed({el:"#js-person-history .js-newsfeed",defaultMode:"personAll",hub:"person",modes:["personAll","personFrom","personTo"],queryParams:{personFrom:e.Person.model.get("id"),personTo:e.Person.model.get("id")}})}})}.call(this),function(){App.module("Person.Notes",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f,h,m,v;return this.startWithParent=!1,r=null,d=null,c=null,s=null,u=null,l=null,a=null,h='<div class="divider">                  <hr>                </div>                <div class="post-row row-fluid" data-key="<%=id%>">                  <div class="post-item span24">                    <div class="post-author">                      <a href="/admin/event/Person.Detail?PersonID=<%=author.id%>" title="View Profile"><%=author.name%></a>                    </div>                    <div class="post-body">                       <%=body%>                    </div>                    <div class="post-meta">                      <i class="icon-calendar"></i> <%=timestamp%>                      <a href="javascript://" class="js-notedelete"><i class="icon-trash"></i></a>                    </div>                  </div>                </div>',f=_.template(h),this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return v(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){r.empty(),e.logInfo("stopped: Person."+t.moduleName)}),this.on("noteDeleted",function(t){var n;e.logInfo("Deleted Note: "+t),n=d.filter("[data-key='"+t+"']"),n.prev().remove(),n.remove()}),t.resetForm=m=function(){s.val(""),s.blur()},v=function(){r=i("#js-person-notes"),c=r.find(".js-notebox"),s=r.find(".js-note-body"),u=r.find(".posts-list"),d=u.find(".post-item"),l=r.find(".js-dummynote"),a=r.find(".js-note-actions .addNote"),e.logDebug(u),s.autosize(),l.on("click",function(){c.addClass("activated"),s.focus()}),s.on("focus",function(){c.addClass("focused")}),s.on("blur",function(){""===i(this).val()?c.removeClass("activated focused"):c.removeClass("focused")}),a.on("click",function(t){var e;return e=s.val(),e=e.replace(/\n/g,"<br />"),i.ajax({url:sRootPath+"/_com/AJAX_Person.cfc",type:"post",dataType:"json",data:{method:"saveNote",PersonID:nPerson,NoteBody:e,returnFormat:"plain"},success:function(t){var e,n,o;return t.STATUS?(addMessage(t.STATUSMSG,250,2500,2500),o=t.PAYLOAD,n=i(f(o)),e=n.find(".post-item"),e.find(".js-notedelete").on("click",function(){p(e)}),u.prepend(n),m()):addError(t.STATUSMSG,250,2500,2500)}}),t.preventDefault()}),d.each(function(){var t,e,n,o,a;return t=i(this),e=t.find(".js-notedelete"),o=t.parents(".post-row"),n=o.prev(),a=o.data("key"),e.on("click",function(e){return p(t),e.preventDefault()})})},p=function(t){var e,n,o;return e=t,n=t.parents(".post-row"),console.log(e),console.log(n),o=n.data("key"),confirm("Are you sure you want to delete this note?")?i.ajax({url:sRootPath+"/_com/AJAX_Person.cfc",dataType:"json",type:"post",data:{method:"deleteNote",noteid:o,returnFormat:"plain"},success:function(t){t.STATUS?(n.prev().remove(),n.remove(),parent.addMessage(t.STATUSMSG,250,2500,2500)):parent.addError(t.STATUSMSG,250,2500,2500)}}):void 0}})}.call(this),function(){App.module("Person.PhotoUpload",function(t,e,n,o,i){var a;return this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName)}),a=function(){var t,n,o;t=i(".js-upload-field"),n=i(".js-upload-form"),o=i(".profile-picture"),t.on("change",function(t){return t.preventDefault,n.ajaxSubmit({url:"/admin/_com/ajax_person.cfc?method=saveprimaryphoto&PersonID="+e.Person.model.get("id"),target:".profile-photo .photo-container",dataType:"json",beforeSubmit:function(t){var e;return e=i.param(t),o.addClass("faded"),!0},uploadProgress:function(){return console.log("testing")},success:function(t){return o.removeClass("faded"),t.STATUS?(addMessage(t.STATUSMSG,250,6e3,4e3),o.css("background-image",'url("'+t.DATASET.path+t.DATASET.hash+'.jpg")')):void 0},error:function(){return o.removeClass("faded")},reset:!0})})}})}.call(this),function(){App.module("Person.Preferences",function(t,e,n,o,i){var a,r,s,c,l,u,d,p,f;return this.startWithParent=!1,s=null,a=null,r=null,u=null,this.on("before:start",function(){e.logInfo("starting: Person."+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a=i("#js-person-preferences"),f(),e.logInfo("started: Person."+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: Person."+t.moduleName),s=null}),this.on("personSpecialties:ready",function(t){i.each(t,function(t,e){return i("#Specialty"+e.SPECIALTYID).attr("checked",!0),p(e.SPECIALTYID)}),e.logDebug("person specialties displayed!")}),this.on("specialties:ready",function(t){var n,o;e.logDebug("specialties list is ready"),n=' <label id="specialty-<%=SPECIALTYID%>" for="Specialty<%=SPECIALTYID%>" class="checkbox specialtyOption" data-key="<%=SPECIALTYID%>">                          <input type="checkbox"                                name="Specialties"                                id="Specialty<%=SPECIALTYID%>"                                value="<%=SPECIALTYID%>" />                          <%=NAME%>                        </label>',o=_.template(n),i.each(t,function(t,e){return r.append(o(e))}),c(nPerson)}),f=function(){r=a.find(".js-specialties > .controls"),l(),t.once("personSpecialties:ready",function(){return s=new e.Components.FormState({el:"#js-person-preferences .js-formstate",saved:!0})}),d(u),i(".specialtyOption").on("change",function(){var t;return t=i.ListGetAt(this.id,2,"-"),p(t)})},c=function(e){i.ajax({url:sRootPath+"/_com/AJAX_person.cfc",dataType:"json",type:"get",data:{method:"getPersonSpecialties",personId:e,returnFormat:"plain"},success:function(e){t.trigger("personSpecialties:ready",e.PAYLOAD)}})},l=function(){i.ajax({url:sRootPath+"/_com/AJAX_activity.cfc",dataType:"json",type:"get",data:{method:"getSpecialties",returnFormat:"plain"},success:function(e){t.trigger("specialties:ready",e.PAYLOAD)}})},d=function(t){i(".degreeOption").removeClass("formOptionSelected"),i("#degree-"+t).addClass("formOptionSelected")},p=function(t){i("#specialty-"+t).is(".formOptionSelected")?i("#specialty-"+t).removeClass("formOptionSelected"):i("#specialty-"+t).addClass("formOptionSelected")}})}.call(this),function(){App.setCookie=function(t,e,n){var o,i;i=new Date,i.setDate(i.getDate()+n),o=escape(e)+(null==n?"":"; expires="+i.toUTCString()),document.cookie="uc_"+t+"="+o},App.getCookie=function(t){var e,n,o;return o=document.cookie,n=o.indexOf(" uc_"+t+"="),-1===n&&(n=o.indexOf(t+"=")),-1===n?o=null:(n=o.indexOf("=",n)+1,e=o.indexOf(";",n),-1===e&&(e=o.length),o=unescape(o.substring(n,e))),o}}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};App.Models.Config=function(t){function n(){App.logInfo("App.config > loaded!"),n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)}.call(this),function(){App.module("Components.Status",function(t,e,n,o,i){var a;this.startWithParent=!1,this.on("before:start",function(){e.logInfo("starting: "+t.moduleName)}),this.on("start",function(){i(document).ready(function(){return a(),e.logInfo("started: "+t.moduleName)})}),this.on("stop",function(){e.logInfo("stopped: "+t.moduleName)}),a=function(){},t.addMessage=function(t,n,o){e.logInfo("adding status message: '"+t+"'"),i.jGrowl(t,{life:o,openDuration:n,closeDuration:100,themeState:"normal"})},t.addError=function(t,n,o){e.logInfo("adding error message: '"+t+"'"),i.jGrowl(t,{header:"ERROR!",life:o,openDuration:n,closeDuration:100,themeState:"error"})}})}.call(this),function(){!function(t){var e,n,o;return e=!0,n=function(){return e?App.logInfo(arguments):void 0},o={init:function(e){var n;return n=t.extend({},t.uiTypeahead.defaults,e),this.each(function(){var e;return e=new t.uiTypeahead(this,n)})},reset:function(){return t.uiTypeahead.clear(this)}},t.fn.uiTypeahead=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on uiTypeahead"):o.init.apply(this,arguments)},t.uiTypeahead=function(e,n){var o,i,a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b,S,T,C,I,w,k,P,D,j,M,x,_,F,L,N;return k=function(){return n.defaultValue?I(n.defaultValue):void 0},C=function(){},F=function(){var e;return e=t(".uiSearchInput ul li"),t(m).each(function(){var n;return n=e.filter("."+this),t(n).slice(0,w-1).show(),t(n).slice(w).hide()})},d=function(e){var o;return o=!1,t(n.excludeItems).each(function(){return this===e?(o=!0,!1):void 0}),o},M=function(){var e,n,o,i;return i=f*A+h*y+39,e=i/f,o=t(window).height()/e,h?n=Math.floor(o/h):void 0},S=function(e){return t.ajax({url:n.ajaxAddURL,type:n.ajaxAddMethod,dataType:"json",async:!1,data:t.extend(n.ajaxAddParams,{name:e}),success:function(t){var e;return e=t.PAYLOAD,e.label=e.name,e.value=e.id,e.ITEM_ID=e.id,I(e),!0}})},I=function(t){return 0!==t.value?n.clearOnSelect?(n.onSelect(t),p()):(i.val(t.value.toString()),i.keyup(),a.val(t.label),l.addClass("selected"),i.keyup(),n.onSelect(t),n.excludeItems.push(t.value)):n.allowAdd?S(a.val(),n.ajaxSearchParams.method):void 0},T=function(){return i.val(""),a.focus(),l.removeClass("selected")},L=function(){return $img},p=function(){return i.val(""),a.val(""),a.focus(),l.removeClass("selected")},g=function(e){return t.ajax({url:"/admin/_com/ajax/typeahead.cfc",type:"get",data:{method:"wikipedia_image",q:e.label},success:function(e){return $img.attr("src",t.trim(e))}})},u={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,ENTER:13,DELETE:46},_=3,x=4,D=_*x,A=68,y=18,f=0,h=0,m=[],P=t(window).height()/A,w=4,N=f*A+h*y+39,b=N/D,n.bucketed&&t(window).resize(function(){return M(),F()}),i=t(e).addClass("hide").focus(function(){}).blur(function(){return a.blur()}),v=i.attr("name"),j=i.width(),i.has(".hide"),a=t("<input/>").attr({type:"text",autocomplete:"off",spellcheck:!1}).addClass("inputtext textInput").click(function(){return t(this).val().length>0&&0===i.val().length?a.autocomplete("widget").show():void 0}).blur(function(){}).keydown(function(t){var e,n;switch(n=void 0,e=void 0,t.keyCode){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:case u.BACKSPACE:T();break;case u.TAB:case u.RETURN:case u.COMMA:case u.ESC:return!0}}),s=t("<div/>").addClass("uiTypeahead").addClass(n.typeaheadClass),l=t("<div/>").addClass("wrap").appendTo(s),n.clearable&&(s.addClass("uiClearableTypeahead"),o=t("<label/>").addClass("clear uiCloseButton").prependTo(l),r=t("<input/>").attr({type:"button",title:"Remove"}).click(function(){return p()}).appendTo(o)),a.appendTo(l),c=t("<div/>").addClass("uiTypeaheadView").appendTo(s),t.isFunction(t.fn.autocomplete)&&(a.autocomplete({autoFocus:!0,appendTo:c,source:function(e,o){return t.trim(e.term).length?t.ajax({url:n.ajaxSearchURL,type:n.ajaxSearchType,dataType:"json",data:t.extend({},n.ajaxSearchParams,{q:e.term}),success:function(e){var i,r,s,c;c=[],r="",s="",f=0,h=0,t.each(e.PAYLOAD.DATASET,function(t){var o;if(f++,r!==e.PAYLOAD.DATASET[t].TYPE){switch(h++,r=e.PAYLOAD.DATASET[t].TYPE,m.push(r),r){case"activity":s="Activities";break;case"entity":s="Entities";break;case"person":s="People";break;default:s="Other"}n.bucketed&&(o={label:s,value:0,image:"",ITEM_ID:0,TEXT:s,SUBTEXT1:"",IMAGE:"",classes:"header",ignored:!0,isHeader:!0,callToAction:!1},c.push(o))}return o=e.PAYLOAD.DATASET[t],o.label=e.PAYLOAD.DATASET[t].TEXT,o.label.length>70&&(o.label=o.label.substr(0,67)+"..."),o.value=e.PAYLOAD.DATASET[t].ITEM_ID,o.image=e.PAYLOAD.DATASET[t].IMAGE,o.type=e.PAYLOAD.DATASET[t].TYPE,o.link=e.PAYLOAD.DATASET[t].LINK,o.classes=e.PAYLOAD.DATASET[t].TYPE,o.callToAction=!1,o.ignored=!1,c.push(o)}),n.allowViewMore&&(i={label:"See more results for '"+a.val()+"'",value:0,image:"",ITEM_ID:0,TEXT:"See more results for '"+a.val()+"'",SUBTEXT1:"Displaying top "+e.PAYLOAD.DATASET.length+" results",IMAGE:"",ignored:!1,callToAction:!0},c.push(i)),n.allowAdd&&(i={label:"Add '"+a.val()+"'",value:0,image:"",ITEM_ID:0,TEXT:"Add '"+a.val()+"'",IMAGE:"",classes:"",ignored:!1,callToAction:!0},c.push(i)),t(this).data("suggestions",c),o(c)}}):void 0},focus:function(){return!1},delay:100,search:function(){T()},select:function(t,e){return I(e.item),!1},change:function(){return!1}}).data("ui-autocomplete")._renderMenu=function(e,n){var o;return o=this,t.each(n,function(n,i){var a,r,s,c,l;s=o._renderItemData(e,i),s.html(""),App.logInfo(s),c=t("<span></span>").addClass("fcg fsm clearfix").text(i.SUBTEXT1),l=t("<span></span>").addClass("fcg fsm clearfix").text(i.SUBTEXT2),r=t("<a></a>").html("<div>"+i.label+"</div>").appendTo(s),a=t("<img/>").attr("src",i.image).prependTo(r),i.SUBTEXT1&&r.append(c),i.SUBTEXT2&&r.append(l),i.ignored&&s.addClass("ignore"),i.isHeader&&a.remove(),i.callToAction&&(a.remove(),s.addClass("calltoaction"))})}),s.insertAfter(i),n.appendTo&&s.prependTo(n.appendTo),jQuery.watermark&&a.watermark(n.watermarkText),k(),t(this).data("hiddenInput",i),t(this).data("input",a),t(this).data("typeahead",a),t(this).data("wrap",a),a},t.uiTypeahead.clear=function(){clear_typeahead()},t.uiTypeahead.defaults={ajaxSearchParams:null,ajaxAddParams:null,ajaxAddMethod:"POST",showImage:!0,allowAdd:!0,allowViewMore:!1,excludeItems:[],clearable:!0,appendTo:null,useExistingInput:!1,clearOnSelect:!1,allowAdd:!0,size:"compact",bucketed:!1,shownCount:5,watermarkText:"Type in a search term",width:384,typeaheadClass:"",minChars:1,ajaxMethod:"POST",type:"token",tokenLimit:null,jsonContainer:null,method:"GET",contentType:"json",autocomplete:null,queryParam:"q",onResult:null,selectFirst:!0,autoFill:!1,defaultValue:null,onAdd:function(){return!0
},onSelect:function(){return!0}}}(jQuery)}.call(this),function(){!function(t){var e,n,o;return e=!0,n=function(){return e?App.logInfo(arguments[0]):void 0},o={init:function(e){var n;return n=t.extend({},t.uiTokenizer.defaults,e),this.each(function(){return new t.uiTokenizer(this,n)})}},t.fn.uiTokenizer=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on uiTokenizer"):o.init.apply(this,arguments)},t.uiTokenizer=function(e,n){var o,i,a,r,s,c,l,u,d,p,f,h,m,v,g,y,A,b,S,T,C,I;switch(p=function(t){t.item.addClass("shown").removeClass("hidden").find(".tokenImg").show(),t.placeholder.addClass("shown shownPlaceholder").css({height:102,width:72}).removeClass("hidden hiddenPlaceholder").find(".tokenImg").show(),t.helper.addClass("shown shownPlaceholder").css({height:102,width:72}).removeClass("hidden hiddenPlaceholder").find(".tokenImg").show()},d=function(t){t.item.removeClass("shown").addClass("hidden").find(".tokenImg").hide(),t.placeholder.removeClass("shown shownPlaceholder").css({height:16,width:72}).addClass("hidden hiddenPlaceholder").find(".tokenImg").hide(),t.helper.removeClass("shown shownPlaceholder").css({height:16,width:72}).addClass("hidden hiddenPlaceholder").find(".tokenImg").hide()},h=function(t){t.addClass("shown").removeClass("hidden").find(".tokenImg").show(),t.hasClass("drag")},f=function(t){t.removeClass("shown").addClass("hidden").find(".tokenImg").hide()},l=function(t){return t>=48&&90>=t||t>=96&&111>=t||t>=186&&192>=t||t>=219&&222>=t?!0:!1},u=function(){var e,o;e=n.defaultValue,o={},t.each(e,function(t,e){A(e,!1)})},I=function(t){A(t),$input.val(""),$input.blur()},g=function(e){var o;o=e?e:i.children(".uiToken").not(".droppable_placeholder"),o.drag("init",function(){var e,n;return e=t("<span/>").addClass("uiToken droppable_placeholder"),n=t(this).siblings(".uiToken"),t(this).data("placeholder",e)}),o.drag("start",function(e,n){var o,a,r,s,c,l,u,d;return r=t(this).data("placeholder"),l=t(this).index(),c=t(this).height(),d=t(this).width(),s=t(this).data("siblings"),t(this).data("startIndex",l),t(this).data("startHeight",c),t(this).data("startWidth",d),o={x:parseInt(e.pageX-n.originalX)/100,y:parseInt(e.pageY-n.originalY)/100},t(this).data("clickOffset",o),u=t(this).height()*o.y,t(this).data("startOffset",u),a=i.offset(),t(this).addClass("drag"),t(this).css({"z-index":"1000"})}).drag(function(e,o){var a,r,s,c,l,u,d,p,f,h,m,g,y,A,b,S,T,C;return h=t(this).data("placeholder"),a=t(this).data("clickOffset"),A=t(this).data("startOffset"),g=t(this).data("startHeight"),b=t(this).data("startWidth"),y=t(this).data("startIndex"),r=i.offset(),m={y:parseInt(e.pageY-r.top),x:parseInt(e.pageX-r.left)},C=m.y,p=m.x,d=o.drop[0],f=t.data(d||{},"drop+reorder"),t(d).parents().filter(i).length()>0&&(t("#stat-container").html("<div>"+t(d).text()+"</div>"),d&&t(d).is(".uiToken")&&(d!==o.current||f!==o.method)&&(t(this).insertBefore(d),o.current=d,o.method=f,o.update(),v(a))),"tokenImage"===n.type?t(this).index()>4?h.addClass("hidden hiddenPlaceholder").removeClass("shown shownPlaceholder").css({height:t(this).height(),width:t(this).width()}):h.addClass("shown shownPlaceholder").removeClass("hidden hiddenPlaceholder").css({height:t(this).height()}):h.removeClass("shown shownPlaceholder").removeClass("hidden hiddenPlaceholder").css({height:t(this).height(),width:t(this).width()}),s=t(this).height(),l=t(this).width(),c=s*a.y,T=parseFloat(e.pageY-o.offsetY)-parseFloat(c),u=l*a.x,S=parseFloat(e.pageX-o.offsetX)-parseFloat(u),t(this).css({position:"relative","z-index":"1000",top:0,left:0})},{relative:!0}).drag("end",function(){var e,n,o;return n=t(this).data("placeholder"),o=t(this).data("startIndex"),e=i.offset(),n.remove(),o!==t(this).index()&&m(),t(this).css({position:"relative","z-index":"0",top:0,left:0,"margin-top":"auto"}),t(this).removeClass("drag")}).drop("init",function(t,e){return this!==e.drag})},b=function(t,e){var o;o=n.onRemove(t,e),t.tooltip("destroy"),o&&(y(e.value),t.remove())},S=function(t){return t.removeClass("uiTokenSelected").removeClass("uiTokenShownSelected"),!1},C=function(e){var n,o;return n=e.next(),o=e.prev(),e.addClass("uiTokenSelected"),e.hasClass("shown")&&e.addClass("uiTokenShownSelected"),t("body").click(),t("html").one("click",function(){return S(e),!1}),!1},m=function(){var e,n,i;n=t('[name="'+c+'_label"]').serializeArray(),i=t('[name="'+c+'_value"]').serializeArray(),e=0,o.html("").val(""),t(n).each(function(){var a;return a=t("<option/>").val(i[e].value).attr("selected",!0).appendTo(o).text(n[e].value),e++}),o.change()},s=function(e){var n;return n=!1,t(T).each(function(){return this===e?(n=!0,!1):void 0}),n},y=function(e){var n;n&&n.length&&(n=t.grep(n,function(t){return t=e}))},A=function(e,o){var a,r,s,c,l,u,d,p,f,h,m,v;if(m=[],f=[],u=t("<span/>"),p=t("<span/>").addClass("text").text(e.label),s=t("<img/>"),d=t("<span/>"),r=t("<div/>"),c=t("<input/>").attr({type:"hidden",value:e.value,name:n.fieldName+"_value",autocomplete:"off"}),a=t("<label/>").addClass("remove uiCloseButton"),l=t("<input/>").attr({type:"button",title:"Remove"}).click(function(){return b(u,e)}),h=!0,o&&(h=n.onSelect(u,e)),h){switch(n.type){case"token":u.addClass("uiToken"),p.appendTo(u);break;case"tokenImage":u.addClass("uiToken"),s.attr({width:n.typeOpts.imgSize,height:n.typeOpts.imgSize,src:e.image}),d.addClass("tokenImg").appendTo(u),r.css({height:n.typeOpts.imgSize+"px",width:n.typeOpts.imgSize+"px"}).addClass("hubPhoto").appendTo(d),s.appendTo(r),p.appendTo(u);break;case"list":u.addClass("uiListToken"),e.label.length>n.tokenMaxChar-3?(v=e.label.substr(0,n.tokenMaxChar-3)+"...",u.tooltip({placement:"top",trigger:"hover focus",container:"body"}),u.tooltip("show")):v=e.label,u.text(v),u.attr("title",e.label),a.appendTo(u),l.appendTo(a),c.appendTo(u),u.wrapInner('<div class="name"></div>');break;case"listImage":u.addClass("uiListToken"),s.attr({width:n.typeOpts.imgSize,height:n.typeOpts.imgSize,src:e.image}).addClass("photo img"),u.text(e.label),a.appendTo(u),l.appendTo(a),s.prependTo(u),c.appendTo(u),u.wrapInner('<div class="name"></div>')}i.addClass("expanded").removeClass("hide"),u.prependTo(i),T.push(e.value)}return!1},r={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,ENTER:13,DELETE:46},T=[],o=t(e).hide().focus(function(){}).blur(function(){$input.blur()}),c=o.attr("name"),a=t("<div/>").addClass("uiTokenizer mrl"),n.type){case"token":n.typeOpts={imgSize:0,dragOffset:{top:-10,left:-30}};break;case"tokenImage":n.typeOpts={imgSize:62,dragOffset:{top:23,left:30}},a.addClass("uiImageTokenizer");break;case"list":n.typeOpts={imgSize:0,dragOffset:{top:-10,left:40}},a.addClass("uiListTokenizer");break;case"listImage":n.typeOpts={imgSize:16,dragOffset:{top:-10,left:40}},a.addClass("uiListImageTokenizer")}return i=t("<div/>").addClass("uiTokenarea hide clearfix"),a.insertAfter(o),o.uiTypeahead({watermarkText:n.watermarkText,defaultValue:null,queryParam:"q",appendTo:a,clearOnSelect:!0,ajaxSearchURL:n.ajaxSearchURL,ajaxSearchType:n.ajaxSearchType,ajaxSearchParams:n.ajaxSearchParams,ajaxAddURL:n.ajaxAddURL,ajaxAddType:n.ajaxAddType,ajaxAddParams:n.ajaxAddParams,onSelect:function(e){return t.inArray(e.value,T)>=0||A(e,!0),!1}}),"top"===n.listLocation?i.prependTo(a):i.appendTo(a),v=function(e){var o,a,r;return o=0,r=i.children(".uiToken").not(".droppable_placeholder"),e||(e={x:0,y:0}),"tokenImage"===n.type?(a="",r.each(function(){var e,n,i;return i=t(this),e=i.index(),n=i.find(".text").text(),a=a+", "+n,5>o?h(i):f(i),o++})):void 0},u()},t.uiTokenizer.defaults={ajaxSearchParams:null,ajaxAddParams:null,ajaxParams:null,shownImages:!0,shownCount:5,listLocation:"bottom",defaultValue:[],watermarkText:"Type in a search term",searchDelay:300,minChars:1,tokenMaxChar:21,ajaxMethod:"get",type:"token",tokenLimit:null,jsonContainer:null,method:"GET",tokenTmpl:'<span title="${label}" class="uiToken ${shown}">        <span class="tokenImg hide">            <div style="height: 62px; width: 62px;" class="hubPhoto">                <img height="62" src="/static/images/no-photo/none_i.png" class="img">            </div>        </span>        <span class="text">            ${label}        </span>        <input type="hidden" value="${value}" name="${fieldName}" autocomplete="off">        <input type="hidden" value="${label}" name="text_${fieldName}" autocomplete="off">    </span>',contentType:"json",autocomplete:null,queryParam:"q",onResult:null,selectFirst:!0,autoFill:!1,defaultData:null,onRemove:function(){return!0},onSelect:function(){return!0}}}(jQuery)}.call(this),function(){var t,e,n,o,i,a,r,s;t=function(){},s=function(){return o.stop()},n=function(e){return t(e)},e=function(){$.ajax({url:"/admin/defibrillator.cfc?method=shock&yell=clear",type:"get",dataType:"json",success:function(t){return n(t)}})},r=function(){var t;return t=$.PeriodicalUpdater("/admin/_com/defibrillator.cfc",{method:"get",data:{method:"shock",yell:"clear"},minTimeout:2e3,maxTimeout:16e3,multiplier:2,type:"json",maxCalls:25,autoStop:0},function(t){return n(t)})},i=function(){var t;return t=0,function(e,n){return clearTimeout(t),t=setTimeout(e,n)}}(),o="",a=function(){var t;return t=$(".ui-dialog:visible"),t.each(function(){var t,e;return t=$(this),e=t.find(".ui-dialog-content").data("dialog"),e.options.maxWidth&&e.options.width&&(t.css("max-width",e.options.maxWidth),e.option("position",e.options.position)),e.options.fluid?$(window).on("resize.responsive",function(){var n;return n=$(window).width(),n<e.options.maxWidth+50&&t.css("width","90%"),e.option("position",e.options.position)}):void 0})},$(function(){return $("*").bind("touchend",function(t){"tooltip"!==$(t.target).attr("rel")&&$("div.tooltip.in").length>0?($("[rel=tooltip]").mouseleave(),t.stopPropagation()):$(t.target).mouseenter()}),$("input").keydown(function(t){return 13===t.keyCode?($(this).parents("form").submit(),!1):void 0}),"boolean"==typeof loggedIn&&loggedIn?r():void 0})}.call(this),Encoder={EncodeType:"entity",isEmpty:function(t){return t?null===t||0==t.length||/^\s+$/.test(t):!0},HTML2Numerical:function(t){var e=new Array("&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"),n=new Array("&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;");return this.swapArrayVals(t,e,n)},NumericalToHTML:function(t){var e=new Array("&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"),n=new Array("&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;");return this.swapArrayVals(t,e,n)},numEncode:function(t){if(this.isEmpty(t))return"";for(var e="",n=0;n<t.length;n++){var o=t.charAt(n);(" ">o||o>"~")&&(o="&#"+o.charCodeAt()+";"),e+=o}return e},htmlDecode:function(t){var e,n,o=t;if(this.isEmpty(o))return"";if(o=this.HTML2Numerical(o),arr=o.match(/&#[0-9]{1,5};/g),null!=arr)for(var i=0;i<arr.length;i++)n=arr[i],e=n.substring(2,n.length-1),o=e>=-32768&&65535>=e?o.replace(n,String.fromCharCode(e)):o.replace(n,"");return o},htmlEncode:function(t,e){return this.isEmpty(t)?"":(e|=!1,e&&(t="numerical"==this.EncodeType?t.replace(/&/g,"&#38;"):t.replace(/&/g,"&amp;")),t=this.XSSEncode(t,!1),"numerical"!=this.EncodeType&&e||(t=this.HTML2Numerical(t)),t=this.numEncode(t),e||(t=t.replace(/&#/g,"##AMPHASH##"),t="numerical"==this.EncodeType?t.replace(/&/g,"&#38;"):t.replace(/&/g,"&amp;"),t=t.replace(/##AMPHASH##/g,"&#")),t=t.replace(/&#\d*([^\d;]|$)/g,"$1"),e||(t=this.correctEncoding(t)),"entity"==this.EncodeType&&(t=this.NumericalToHTML(t)),t)},XSSEncode:function(t,e){return this.isEmpty(t)?"":(e=e||!0,e?(t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")):(t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&#34;"),t=t.replace(/</g,"&#60;"),t=t.replace(/>/g,"&#62;")),t)},hasEncoded:function(t){return/&#[0-9]{1,5};/g.test(t)?!0:/&[A-Z]{2,6};/gi.test(t)?!0:!1},stripUnicode:function(t){return t.replace(/[^\x20-\x7E]/g,"")},correctEncoding:function(t){return t.replace(/(&amp;)(amp;)+/,"$1")},swapArrayVals:function(t,e,n){if(this.isEmpty(t))return"";var o;if(e&&n&&e.length==n.length)for(var i=0,a=e.length;a>i;i++)o=new RegExp(e[i],"g"),t=t.replace(o,n[i]);return t},inArray:function(t,e){for(var n=0,o=e.length;o>n;n++)if(e[n]===t)return n;return-1}};